-- [[ Neko x AutoV4: Module Edition ]]

-- 1. 自殺協議：確保每次 loadstring 時都會殺掉舊的自己，防止重複運行
local scriptId = "NekoV4_Exec_" .. tick()
_G.CurrentV4ID = scriptId

-- 2. 獲取服務
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

-- 3. 獨立執行緒 (子模組核心)
task.spawn(function()
    -- 這裡不用 print，保持後台靜默
    while _G.CurrentV4ID == scriptId do
        -- 只有當主面板把這個全域變數設為 true 時，這裡才會動
        if _G.AutoV4 then
            pcall(function()
                local char = LocalPlayer.Character
                local backpack = LocalPlayer:FindFirstChild("Backpack")
                local awake = (char and char:FindFirstChild("Awakening")) or (backpack and backpack:FindFirstChild("Awakening"))
                
                if awake then
                    awake.RemoteFunction:InvokeServer(true)
                end
            end)
        end
        -- 暴力頻率 (0.01s)，與你的 PVP 模組同步
        task.wait(0.01)
    end
end)
