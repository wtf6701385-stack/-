-- NEKOSPD.lua (透明背景 + RGB 外框極簡版)
pcall(function() game.Players.LocalPlayer.PlayerGui.CatSpeedV3_Custom:Destroy() end)

local main = Instance.new("ScreenGui")
local Frame = Instance.new("Frame")
local RGBLine = Instance.new("Frame") -- RGB 外框
local speedInput = Instance.new("TextBox") 
local onof = Instance.new("TextButton")
local closebutton = Instance.new("TextButton")
local uiCorner = Instance.new("UICorner")

-- 初始化介面
main.Name = "CatSpeedV3_Custom"
main.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")
main.ResetOnSpawn = false

-- 主框架：透明背景
Frame.Parent = main
Frame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
Frame.BackgroundTransparency = 0.5 -- 半透明背景
Frame.Position = UDim2.new(0.2, 0, 0.5, 0) 
Frame.Size = UDim2.new(0, 160, 0, 45)
Frame.Active = true
Frame.Draggable = true

uiCorner.Parent = Frame
uiCorner.CornerRadius = UDim.new(0, 10)

-- RGB 外框效果 (利用一條細線圍繞)
RGBLine.Name = "RGBLine"
RGBLine.Parent = Frame
RGBLine.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
RGBLine.Position = UDim2.new(0, -1, 0, -1)
RGBLine.Size = UDim2.new(1, 2, 1, 2)
RGBLine.ZIndex = Frame.ZIndex - 1 -- 放在背景後面

local lineCorner = Instance.new("UICorner")
lineCorner.CornerRadius = UDim.new(0, 11)
lineCorner.Parent = RGBLine

-- 速度輸入框 (左邊)
speedInput.Parent = Frame
speedInput.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
speedInput.BackgroundTransparency = 0.2
speedInput.Position = UDim2.new(0.08, 0, 0.2, 0)
speedInput.Size = UDim2.new(0, 50, 0, 28)
speedInput.Font = Enum.Font.SourceSansBold
speedInput.Text = tostring(_G.CatSpeedValue or 50)
speedInput.TextColor3 = Color3.fromRGB(0, 0, 0)
speedInput.TextScaled = true
speedInput.ClearTextOnFocus = true

local boxCorner = Instance.new("UICorner")
boxCorner.CornerRadius = UDim.new(0, 6)
boxCorner.Parent = speedInput

-- 啟動按鈕 (右邊)
onof.Parent = Frame
onof.Text = "啟動"
onof.Size = UDim2.new(0, 75, 0, 28)
onof.Position = UDim2.new(0.45, 0, 0.2, 0)
onof.Font = Enum.Font.SourceSansBold
onof.TextColor3 = Color3.fromRGB(255, 255, 255)
onof.TextScaled = true
onof.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
onof.BackgroundTransparency = 0.3

local btnCorner = Instance.new("UICorner")
btnCorner.CornerRadius = UDim.new(0, 6)
btnCorner.Parent = onof

-- 關閉按鈕
closebutton.Parent = Frame
closebutton.Text = "×"
closebutton.Size = UDim2.new(0, 20, 0, 20)
closebutton.Position = UDim2.new(0.9, 0, -0.2, 0)
closebutton.BackgroundTransparency = 1
closebutton.TextColor3 = Color3.fromRGB(255, 255, 255)
closebutton.TextScaled = true

-- --- 核心邏輯 ---
local active = false
local speaker = game.Players.LocalPlayer

-- RGB 外框循環效果
task.spawn(function()
    while main.Parent do
        local color = Color3.fromHSV(tick() % 5 / 5, 0.8, 1)
        RGBLine.BackgroundColor3 = color
        task.wait()
    end
end)

-- 數值處理 (0-500)
local function updateSpeed(newVal)
    local n = tonumber(newVal)
    if n then
        n = math.clamp(n, 0, 500)
        _G.CatSpeedValue = n
        speedInput.Text = tostring(n)
    end
end

speedInput.FocusLost:Connect(function() updateSpeed(speedInput.Text) end)

-- 加速執行
onof.MouseButton1Click:Connect(function()
    active = not active
    if active then
        onof.Text = "停止"
        onof.TextColor3 = Color3.fromRGB(255, 100, 100)
        task.spawn(function()
            local hb = game:GetService("RunService").Heartbeat
            while active do
                hb:Wait()
                local char = speaker.Character
                local hum = char and char:FindFirstChildOfClass("Humanoid")
                if char and hum and hum.MoveDirection.Magnitude > 0 then
                    char:TranslateBy(hum.MoveDirection * (_G.CatSpeedValue / 10))
                end
            end
        end)
    else
        onof.Text = "啟動"
        onof.TextColor3 = Color3.fromRGB(255, 255, 255)
    end
end)

closebutton.MouseButton1Click:Connect(function() main:Destroy() end)
