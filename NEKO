-- [[ GitHub: NEKO - é›™é‡æ¨¡å¼æ ¸å¿ƒæ³¨å…¥ç‰ˆ ]]
local success, NEKOLib = pcall(function()
    return loadstring(game:HttpGet("https://raw.githubusercontent.com/wtf6701385-stack/-/refs/heads/main/NEKOUI?t="..tick()))()
end)

if not success or not NEKOLib then
    warn("âŒ NEKO UI è¼‰å…¥å¤±æ•—ï¼")
    return
end

local Lib = NEKOLib:Init()
local player = game:GetService("Players").LocalPlayer
local RunService = game:GetService("RunService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

-- [[ æ ¸å¿ƒä¿®æ­£ï¼šè‡ªå‹•è·¯å¾‘éŽ–å®š ]]
local Net = ReplicatedStorage:WaitForChild("Modules"):WaitForChild("Net")
local RE = Net:WaitForChild("RE")
local RegisterAttack = RE:FindFirstChild("RegisterAttack") or RE:FindFirstChild("Attack")
local RegisterHit = RE:FindFirstChild("RegisterHit") or RE:FindFirstChild("Hit")

-- [[ å…¨åŸŸæŽ§åˆ¶ ]]
_G.PVP = false
_G.MOB = false
_G.FastAttack = false

-- [[ æ ¸å¿ƒ FastAttack åŸ·è¡Œå‡½æ•¸ (PVP/MOB æ™ºèƒ½åˆ‡æ›ç‰ˆ) ]]
local function StartFastAttack()
    task.spawn(function()
        local scriptId = tick()
        _G.CurrentFastAtkID = scriptId
        
        while _G.FastAttack and _G.CurrentFastAtkID == scriptId do
            RunService.Stepped:Wait()
            local char = player.Character
            local tool = char and char:FindFirstChildOfClass("Tool")
            
            if tool and tool.ToolTip ~= "Gun" then
                local target = nil
                local dist = 3000
                local myPos = char.PrimaryPart.Position
                
                if _G.PVP then
                    -- ã€æ‰“æž¶æ¨¡å¼ã€‘éŽ–å®šå…¶ä»–çŽ©å®¶
                    for _, p in pairs(game:GetService("Players"):GetPlayers()) do
                        if p ~= player and p.Character and p.Character:FindFirstChild("Humanoid") and p.Character.Humanoid.Health > 0 then
                            local h = p.Character:FindFirstChild("Head")
                            if h and (h.Position - myPos).Magnitude < dist then
                                dist = (h.Position - myPos).Magnitude
                                target = h
                            end
                        end
                    end
                else
                    -- ã€åˆ·æ€ªæ¨¡å¼ã€‘éŽ–å®šæ€ªç‰© (æŽ’é™¤çŽ©å®¶)
                    local enemyPath = workspace:FindFirstChild("Enemies") or workspace
                    for _, v in pairs(enemyPath:GetDescendants()) do
                        if v:IsA("Model") and v:FindFirstChild("Humanoid") and v.Humanoid.Health > 0 then
                            if not game:GetService("Players"):GetPlayerFromCharacter(v) then
                                local h = v:FindFirstChild("Head") or v:FindFirstChild("HumanoidRootPart")
                                if h and (h.Position - myPos).Magnitude < dist then
                                    dist = (h.Position - myPos).Magnitude
                                    target = h
                                end
                            end
                        end
                    end
                end

                if target then
                    RegisterAttack:FireServer(0.125)
                    for i = 1, 12 do -- å¼·åŒ–æ³¨å…¥å€æ•¸è‡³ 12 å€
                        RegisterHit:FireServer(target, {target})
                    end
                end
            end
        end
    end)
end

local function KillCombat()
    _G.FastAttack = false
    _G.PVP = false
    _G.MOB = false
end

-- --- UI æŒ‰éˆ•è¨­å®š --- --

local Tab1 = Lib:CreateTab("è²“æˆ°é¬¥", false)
local btnPVP, btnMOB

btnPVP = Tab1:AddButton("æ‰“æž¶æ¨¡å¼ : OFF", function(self)
    _G.PVP = not _G.PVP
    if _G.PVP then
        _G.MOB = false
        if btnMOB then btnMOB.Text = "  åˆ·æ€ªæ¨¡å¼ : OFF" end
        _G.FastAttack = true
        StartFastAttack()
    else
        KillCombat()
    end
    self.Text = "  æ‰“æž¶æ¨¡å¼ : " .. (_G.PVP and "ON" or "OFF")
end)

btnMOB = Tab1:AddButton("åˆ·æ€ªæ¨¡å¼ : OFF", function(self)
    _G.MOB = not _G.MOB
    if _G.MOB then
        _G.PVP = false
        if btnPVP then btnPVP.Text = "  æ‰“æž¶æ¨¡å¼ : OFF" end
        _G.FastAttack = true
        StartFastAttack()
    else
        KillCombat()
    end
    self.Text = "  åˆ·æ€ªæ¨¡å¼ : " .. (_G.MOB and "ON" or "OFF")
end)

-- è£œä¸Šå…¶ä»–å…¬å‘Šèˆ‡åŠŸèƒ½ Tab ä¿æŒä»‹é¢å®Œæ•´...
Lib:CreateTab("è²“å…¬å‘Š", true):AddInfo("ðŸ¾ PVP ä¿®å¾©", "å·²ä¿®æ­£ç„¡æ³•éŽ–å®šçŽ©å®¶çš„å•é¡Œã€‚")
local Tab2 = Lib:CreateTab("è²“åŠŸèƒ½", false)
Tab2:AddButton("è²“è²“ç¥žé€Ÿ", function() loadstring(game:HttpGet("https://raw.githubusercontent.com/wtf6701385-stack/-/refs/heads/main/NEKOSPD"))() end)

print("âœ… NEKO PVP/MOB é›™æ ¸å¿ƒç‰ˆæœ¬å·²æ³¨å…¥ï¼")
