-- [[ GitHub: NEKO ]]
local success, NEKOLib = pcall(function()
    return loadstring(game:HttpGet("https://raw.githubusercontent.com/wtf6701385-stack/-/refs/heads/main/NEKOUI"))()
end)

if not success or not NEKOLib then
    warn("âŒ NEKO UI è¼‰å…¥å¤±æ•—ï¼")
    return
end

local Lib = NEKOLib:Init()

_G.PVP = false
_G.MOB = false
_G.FastAttack = false
_G.AutoV4 = false -- åˆå§‹åŒ– V4 é–‹é—œ

-- [[ æ ¸å¿ƒé‚è¼¯ï¼šæ¯å¹€æª¢æŸ¥ä¸¦è‡ªå‹•å•Ÿå‹• V4 ]]
game:GetService("RunService").Heartbeat:Connect(function()
    if _G.AutoV4 then
        pcall(function()
            local player = game:GetService("Players").LocalPlayer
            local bp = player:FindFirstChild("Backpack")
            local char = player.Character
            -- æª¢æŸ¥è¦ºé†’ç‰©ä»¶ä½ç½®
            local awake = (bp and bp:FindFirstChild("Awakening")) or (char and char:FindFirstChild("Awakening"))
            if awake then 
                awake.RemoteFunction:InvokeServer(true) 
            end
        end)
    end
end)

local function KillCombat()
    _G.FastAttack = false
    _G.CurrentFastAtkID = "KILL_" .. tick()
end

local p0, l0 = Lib:CreateTab("è²“å…¬å‘Š", true)
Lib:AddInfo(p0, l0, "ğŸ¾ ç‹€æ…‹", "UI å·²æˆåŠŸè¼‰å…¥")

local p1, l1 = Lib:CreateTab("è²“æˆ°é¬¥")
local btnPVP, btnMOB

btnPVP = Lib:AddButton(p1, l1, "æ‰“æ¶æ¨¡å¼ : OFF", function(self)
    _G.PVP = not _G.PVP
    if _G.PVP then
        _G.MOB = false
        if btnMOB then btnMOB.Text = "  ğŸ± åˆ·æ€ªæ¨¡å¼ : OFF" end
        KillCombat()
        task.wait(0.1)
        _G.FastAttack = true
        loadstring(game:HttpGet("https://raw.githubusercontent.com/wtf6701385-stack/-/refs/heads/main/NEKOPVP"))()
    else
        KillCombat()
    end
    self.Text = "  ğŸ± æ‰“æ¶æ¨¡å¼ : " .. (_G.PVP and "ON" or "OFF")
end)

btnMOB = Lib:AddButton(p1, l1, "åˆ·æ€ªæ¨¡å¼ : OFF", function(self)
    _G.MOB = not _G.MOB
    if _G.MOB then
        _G.PVP = false
        if btnPVP then btnPVP.Text = "  ğŸ± æ‰“æ¶æ¨¡å¼ : OFF" end
        KillCombat()
        task.wait(0.1)
        _G.FastAttack = true
        loadstring(game:HttpGet("https://raw.githubusercontent.com/wtf6701385-stack/-/refs/heads/main/NEKOMOB"))()
    else
        KillCombat()
    end
    self.Text = "  ğŸ± åˆ·æ€ªæ¨¡å¼ : " .. (_G.MOB and "ON" or "OFF")
end)

local p2, l2 = Lib:CreateTab("è²“åŠŸèƒ½")
Lib:AddButton(p2, l2, "è²“è²“ç¥é€Ÿ", function() loadstring(game:HttpGet("https://raw.githubusercontent.com/wtf6701385-stack/-/refs/heads/main/NEKOSPD"))() end)
Lib:AddButton(p2, l2, "è²“è²“é€è¦–", function() loadstring(game:HttpGet("https://raw.githubusercontent.com/wtf6701385-stack/-/refs/heads/main/NEKOESP"))() end)

-- æ–°å¢ï¼šè‡ªå‹• V4 æŒ‰éˆ•
Lib:AddButton(p2, l2, "è‡ªå‹• V4 : OFF", function(self)
    _G.AutoV4 = not _G.AutoV4
    self.Text = "  ğŸ± è‡ªå‹• V4 : " .. (_G.AutoV4 and "ON" or "OFF")
end)

local p3, l3 = Lib:CreateTab("è²“å¬å–š")
Lib:AddButton(p3, l3, "å¬å–šé£›è¡Œ", function() loadstring(game:HttpGet("https://raw.githubusercontent.com/wtf6701385-stack/-/refs/heads/main/NEKOFly"))() end)
