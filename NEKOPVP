-- [[ GitHub: NEKOPVP - ç¥žåˆ€æœ€å¼·è§£éŽ–å°æŽ¥æ ¸å¿ƒ ]]
local CurrentSession = _G.CurrentFastAtkID 
if not _G.FastAttack or not CurrentSession then return end

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local LP = game.Players.LocalPlayer

local function GetCore()
    local Net = ReplicatedStorage:WaitForChild("Modules"):WaitForChild("Net")
    return Net:WaitForChild("RE/RegisterAttack"), Net:WaitForChild("RE/RegisterHit")
end

task.spawn(function()
    print("ðŸš€ ç¥žåˆ€å¼•æ“Ž(PVP)å•Ÿå‹•æˆåŠŸï¼å°æŽ¥ ID: " .. CurrentSession)
    
    while _G.FastAttack and _G.CurrentFastAtkID == SessionID do
        pcall(function()
            local RegAtk, RegHit = GetCore()
            local char = LP.Character
            if not char or not char:FindFirstChild("HumanoidRootPart") then return end
            
            local targets = {}
            local mainPart = nil
            
            -- ç¥žåˆ€å…¨æ–¹ä½æŽƒæ (5000 ç¯„åœ)
            for _, p in pairs(Players:GetPlayers()) do
                if p ~= LP and p.Character and p.Character:FindFirstChild("Humanoid") then
                    local root = p.Character:FindFirstChild("HumanoidRootPart") or p.Character:FindFirstChild("Head")
                    if p.Character.Humanoid.Health > 0 and root then
                        if (root.Position - char.HumanoidRootPart.Position).Magnitude < 5000 then
                            if not mainPart then mainPart = root end
                            table.insert(targets, {p.Character, root})
                        end
                    end
                end
                if #targets >= 25 then break end
            end
            
            -- ç¥žåˆ€æ³¨å…¥ç™¼å‹•
            if #targets > 0 and mainPart then
                local tool = char:FindFirstChildOfClass("Tool")
                if tool and tool.ToolTip ~= "Gun" then
                    RegAtk:FireServer(0.1)
                    RegHit:FireServer(mainPart, targets)
                end
            end
        end)
        task.wait(0.001) -- ç¥žåˆ€æ¥µé€Ÿé »çŽ‡
    end
    print("ðŸ’€ ç¥žåˆ€ ID è®Šæ›´ï¼Œæ ¸å¿ƒè‡ªæ®ºã€‚")
end)
