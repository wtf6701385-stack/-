local Players=game:GetService("Players")
local RunService=game:GetService("RunService")
local ReplicatedStorage=game:GetService("ReplicatedStorage")
local Player=Players.LocalPlayer
local Net=ReplicatedStorage:WaitForChild("Modules"):WaitForChild("Net")
local RegAttack=Net:WaitForChild("RE/RegisterAttack")
local RegHit=Net:WaitForChild("RE/RegisterHit")
_G.AOE_RUNNING=true
local function GetRoot(c)return c and(c:FindFirstChild("HumanoidRootPart")or c:FindFirstChild("Head"))end
local function IsAlive(c)local h=c and c:FindFirstChildOfClass("Humanoid")return h and h.Health>0 end
task.spawn(function()
while _G.AOE_RUNNING do
RunService.Heartbeat:Wait()
local char=Player.Character
local root=GetRoot(char)
local tool=char and char:FindFirstChildOfClass("Tool")
if tool and root then
local targets={}
local myPos=root.Position
local folders={workspace:FindFirstChild("Enemies"),workspace:FindFirstChild("Characters"),workspace:FindFirstChild("NPCs")}
for _,f in ipairs(folders)do
if f then
local children=f:GetChildren()
for i=1,#children do
local m=children[i]
if m~=char and IsAlive(m)then
local tr=GetRoot(m)
if tr then
local diff=tr.Position-myPos
if(diff.X^2+diff.Y^2+diff.Z^2)<=12250000 then
table.insert(targets,{m,tr})
end
end
end
end
end
end
if #targets>0 then
RegAttack:FireServer(0)
RegHit:FireServer(targets[1][2],targets)
end
end
task.wait(0.01)
end
end)
