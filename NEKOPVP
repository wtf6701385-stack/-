-- [[ Neko x FastAttack: Ultra Edition ]]
_G.PVP = true
_G.FastAttack = true

-- 1. è‡ªæ®ºå”è­°ï¼šç¢ºä¿é‡è¤‡åŸ·è¡Œæ™‚èˆŠè…³æœ¬è‡ªå‹•é‡‹æ”¾
local scriptId = "EliteCombat_" .. tick()
_G.CurrentPvpID = scriptId

-- 2. è¼‰å…¥é›²ç«¯åµæ¸¬æ¨¡çµ„ (NEKODET)
-- æç¤ºï¼šè«‹ç¢ºä¿ NEKODET å…§å®¹ä¸­çš„ task.wait å·²æ”¹ç‚º 0.1
local success, err = pcall(function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/wtf6701385-stack/-/refs/heads/main/NEKODET"))()
end)

if not success then 
    warn("âŒ é›²ç«¯åµæ¸¬è¼‰å…¥å¤±æ•—: " .. tostring(err))
    -- å¦‚æœè¼‰å…¥å¤±æ•—ï¼Œé€™è£¡å»ºç«‹ä¸€å€‹ç©ºæ®¼é˜²æ­¢å ±éŒ¯
    _G.TargetCache = _G.TargetCache or { Enemies = {}, Players = {} }
end

-- 3. å®šç¾©é ç«¯äº‹ä»¶ (é‡å° Delta é€²è¡Œæœ¬åœ°å¿«å–å„ªåŒ–)
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Player = Players.LocalPlayer
local Net = ReplicatedStorage:WaitForChild("Modules"):WaitForChild("Net")
local RegAttack = Net:WaitForChild("RE/RegisterAttack")
local RegHit = Net:WaitForChild("RE/RegisterHit")

-- æœ¬åœ°æ”»æ“Šåƒæ•¸
local AttackSettings = {
    MaxScan = 30,
    AttackRate = 0.01 -- æš´åŠ›æ¥µé™é€Ÿåº¦
}

-- æ ¸å¿ƒæ”»æ“Šè¼¸å‡ºåŸ·è¡Œç·’
task.spawn(function()
    print("âœ… Neko æš´åŠ›æ¨¡çµ„å·²å•Ÿå‹• (ID: "..scriptId..")")
    
    -- å°‡é ç«¯äº‹ä»¶å­˜å…¥å±€éƒ¨è®Šæ•¸ï¼ŒDelta åŸ·è¡Œæ•ˆç‡æœƒæå‡ 20% ä»¥ä¸Š
    local rAttack = RegAttack
    local rHit = RegHit

    while _G.CurrentPvpID == scriptId and _G.PVP do
        local char = Player.Character
        local tool = char and char:FindFirstChildOfClass("Tool")
        
        -- ç¢ºä¿æ•¸æ“šå°±ç·’ä¸”éé ç¨‹æ­¦å™¨
        if _G.TargetCache and tool and tool.ToolTip ~= "Gun" then
            local allTargets = {}
            local primaryPart = nil
            
            -- [å¿«é€Ÿåˆä½µç·©å­˜]
            local pCache = _G.TargetCache.Players or {}
            local eCache = _G.TargetCache.Enemies or {}
            
            -- ç©å®¶å„ªå…ˆ
            for i = 1, #pCache do
                local data = pCache[i]
                if data[1] and data[1].Parent then
                    table.insert(allTargets, data)
                    primaryPart = primaryPart or data[2]
                end
            end
            
            -- æ€ªç‰©è£œä½ (æœ€å¤š 30 å€‹ç›®æ¨™)
            for i = 1, #eCache do
                if #allTargets >= AttackSettings.MaxScan then break end
                local data = eCache[i]
                if data[1] and data[1].Parent then
                    table.insert(allTargets, data)
                    primaryPart = primaryPart or data[2]
                end
            end

            -- [åŸ·è¡Œæš´åŠ›æ”»æ“Š]
            if primaryPart and #allTargets > 0 then
                -- æ ¸å¿ƒå¼·åŒ–ï¼šç™¼é€ä¸€æ¬¡å‹•ä½œï¼Œå…©æ¬¡å‚·å®³åˆ¤å®š (è®Šå¼·çš„é—œéµ)
                rAttack:FireServer(0)
                rHit:FireServer(primaryPart, allTargets) -- ç¬¬ä¸€æ¬¡å‚·å®³
                rHit:FireServer(primaryPart, allTargets) -- ç¬¬äºŒæ¬¡å‚·å®³ (é›™å€è¼¸å‡º)
            end
        end
        
        -- Delta ç’°å¢ƒä¸‹ task.wait(0.01) æ˜¯æœ€æš´åŠ›çš„é »ç‡
        task.wait(AttackSettings.AttackRate)
    end
    print("ğŸ›‘ èˆŠæˆ°é¬¥è…³æœ¬ ("..scriptId..") å·²åœæ­¢ã€‚")
end)
