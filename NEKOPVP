-- [[ GitHub: NEKOPVP - è¶…ç´šé©é…ç‰ˆ ]]
-- é‚è¼¯ï¼šä¸è«–ä¸»è…³æœ¬çµ¦ä»€éº¼ IDï¼ŒåŠ è¼‰å³å¼·åˆ¶åŸ·è¡Œï¼Œä¸¦æ¥ç®¡è‡ªæ®ºå”è­°

-- 1. å¼·è¡Œé‡è¨­é–‹é—œï¼Œç¢ºä¿å•Ÿå‹•
_G.FastAttack = true
local SessionID = "NEKO_PVP_FORCE_" .. tick() 
_G.CurrentFastAtkID = SessionID -- å¼·è¡Œè¦†è“‹ä¸»è…³æœ¬çš„ KILL IDï¼Œå¥ªå–æ§åˆ¶æ¬Š

local LP = game.Players.LocalPlayer
local Net = game:GetService("ReplicatedStorage"):WaitForChild("Modules"):WaitForChild("Net")
local RegAttack = Net:WaitForChild("RE/RegisterAttack")
local RegHit = Net:WaitForChild("RE/RegisterHit")

-- é…ç½®
local Settings = {
    Range = 5000, 
    AttackDelay = 0.1,
    MaxTargets = 20
}

-- ç²å–ç©å®¶ç›®æ¨™
local function GetTargets()
    local targets = {}
    local center = nil
    local char = LP.Character
    if not (char and char.PrimaryPart) then return nil, {} end
    
    for _, p in pairs(game.Players:GetPlayers()) do
        if p ~= LP and p.Character and p.Character:FindFirstChild("Humanoid") then
            local root = p.Character:FindFirstChild("HumanoidRootPart")
            if root and p.Character.Humanoid.Health > 0 then
                if (root.Position - char.PrimaryPart.Position).Magnitude <= Settings.Range then
                    if not center then center = root end
                    table.insert(targets, {p.Character, root})
                end
            end
        end
        if #targets >= Settings.MaxTargets then break end
    end
    return center, targets
end

-- æ®ºæˆ®å¾ªç’°
task.spawn(function()
    print("âš”ï¸ è²“æˆ°é¬¥ï¼šPVP å¼·åˆ¶é©é…ç‰ˆå·²å¥ªå–æ§åˆ¶æ¬Šï¼")
    print("ğŸ¯ ç›®å‰ Session: " .. SessionID)

    while _G.FastAttack and _G.CurrentFastAtkID == SessionID do
        local tool = LP.Character and LP.Character:FindFirstChildOfClass("Tool")
        if tool then
            local center, allTargets = GetTargets()
            if center and #allTargets > 0 then
                -- åŸ·è¡Œé›¶å¼æ³¨å…¥
                RegAttack:FireServer(0)
                pcall(function()
                    RegHit:FireServer(center, allTargets)
                end)
            end
        end
        task.wait(Settings.AttackDelay)
    end
    
    print("ğŸ’€ åµæ¸¬åˆ°ä¸»è…³æœ¬åˆ‡æ›æˆ–é—œé–‰ï¼ŒPVP æ ¸å¿ƒå„ªé›…é€€å ´ã€‚")
end)
