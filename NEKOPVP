local Players = game:GetService("Players")
local LP = Players.LocalPlayer
local Net = game:GetService("ReplicatedStorage"):WaitForChild("Modules"):WaitForChild("Net")
local RegAttack = Net:WaitForChild("RE/RegisterAttack")
local RegHit = Net:WaitForChild("RE/RegisterHit")

task.spawn(function()
    while true do
        if _G.MOB == true then
            pcall(function()
                local char = LP.Character
                local root = char and char:FindFirstChild("HumanoidRootPart")
                local tool = char and char:FindFirstChildOfClass("Tool") or LP.Backpack:FindFirstChildOfClass("Tool")
                
                if tool and root then
                    if tool.Parent ~= char then char.Humanoid:EquipTool(tool) end
                    local targets = {}
                    local candidates = workspace:FindFirstChild("Enemies") and workspace.Enemies:GetChildren() or workspace:GetChildren()
                    
                    for _, v in ipairs(candidates) do
                        local vHum = v:FindFirstChildOfClass("Humanoid")
                        local vRoot = v:FindFirstChild("HumanoidRootPart") or v:FindFirstChild("Torso")
                        if vHum and vHum.Health > 0 and vRoot and not Players:GetPlayerFromCharacter(v) then
                            if not v.Name:lower():find("npc") then
                                vRoot.CFrame = root.CFrame * CFrame.new(0, 50, 0)
                                table.insert(targets, {v, vRoot})
                            end
                        end
                        if #targets >= 25 then break end
                    end
                    if #targets > 0 then
                        RegAttack:FireServer(0)
                        RegHit:FireServer(targets[1][2], targets)
                    end
                end
            end)
        end
        task.wait(0.15)
    end
end)
