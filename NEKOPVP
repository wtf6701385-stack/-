-- [[ Neko x FastAttack: Local Combat Execution ]]
_G.PVP = true
_G.FastAttack = true

-- 1. è‡ªæ®ºå”è­°ï¼šç¢ºä¿é‡è¤‡åŸ·è¡Œæ™‚èˆŠè…³æœ¬è‡ªå‹•é‡‹æ”¾
local scriptId = "EliteCombat_" .. tick()
_G.CurrentPvpID = scriptId

-- 2. è¼‰å…¥ä½ çš„é›²ç«¯åµæ¸¬æ¨¡çµ„ (NEKODET)
local success, err = pcall(function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/wtf6701385-stack/-/refs/heads/main/NEKODET"))()
end)

if not success then 
    warn("âŒ é›²ç«¯åµæ¸¬è¼‰å…¥å¤±æ•—: " .. tostring(err))
    return 
end

-- 3. å®šç¾©é ç«¯äº‹ä»¶èˆ‡ç’°å¢ƒ
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Player = Players.LocalPlayer
local Net = ReplicatedStorage:WaitForChild("Modules"):WaitForChild("Net")
local RegAttack = Net:WaitForChild("RE/RegisterAttack")
local RegHit = Net:WaitForChild("RE/RegisterHit")

-- æœ¬åœ°æ”»æ“Šåƒæ•¸
local AttackSettings = {
    MaxScan = 30,
    AttackRate = 0.01
}

-- æ ¸å¿ƒæ”»æ“Šè¼¸å‡ºåŸ·è¡Œç·’
task.spawn(function()
    print("âœ… Neko æˆ°é¬¥æ¨¡çµ„å·²å•Ÿå‹• (ID: "..scriptId..")")
    
    while _G.CurrentPvpID == scriptId and _G.PVP do
        local char = Player.Character
        local tool = char and char:FindFirstChildOfClass("Tool")
        
        -- ç¢ºä¿é›²ç«¯æ•¸æ“šå·²å°±ç·’ä¸”æ‰‹æŒè¿‘æˆ°æ­¦å™¨
        if _G.TargetCache and tool and tool.ToolTip ~= "Gun" then
            local allTargets = {}
            local primaryPart = nil
            
            -- [å„ªå…ˆé †åº 1] è®€å–é›²ç«¯ç©å®¶ç·©å­˜
            local pCache = _G.TargetCache.Players or {}
            for i = 1, #pCache do
                local data = pCache[i]
                if data[1] and data[1].Parent then
                    table.insert(allTargets, data)
                    if not primaryPart then primaryPart = data[2] end
                end
            end
            
            -- [å„ªå…ˆé †åº 2] è®€å–é›²ç«¯æ€ªç‰©ç·©å­˜ï¼ˆè£œä½è‡³ 30 å€‹ï¼‰
            local eCache = _G.TargetCache.Enemies or {}
            for i = 1, #eCache do
                if #allTargets >= AttackSettings.MaxScan then break end
                local data = eCache[i]
                if data[1] and data[1].Parent then
                    table.insert(allTargets, data)
                    if not primaryPart then primaryPart = data[2] end
                end
            end

            -- [åŸ·è¡Œæ”»æ“Š]
            if primaryPart and #allTargets > 0 then
                RegAttack:FireServer(0)
                RegHit:FireServer(primaryPart, allTargets)
            end
        end
        task.wait(AttackSettings.AttackRate)
    end
    print("ğŸ›‘ èˆŠæˆ°é¬¥è…³æœ¬ ("..scriptId..") å·²åœæ­¢ã€‚")
end)
