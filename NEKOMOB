-- [[ ğŸŒ‘ å½±ï¼šäººæ“ äººå¼ - æ‹‰æ€ªè½Ÿç‚¸ç‰ˆ ]] --
local LP = game.Players.LocalPlayer
local Net = game:GetService("ReplicatedStorage"):WaitForChild("Modules"):WaitForChild("Net")
local RegAttack = Net:WaitForChild("RE/RegisterAttack")
local RegHit = Net:WaitForChild("RE/RegisterHit")

local function GetRandomPart(target)
    local parts = {}
    for _, v in ipairs(target:GetChildren()) do
        if v:IsA("BasePart") and v.CanCollide then table.insert(parts, v) end
    end
    return #parts > 0 and parts[math.random(1, #parts)] or target:FindFirstChild("HumanoidRootPart")
end

task.spawn(function()
    while task.wait(0.0005) do
        if _G.MOB then
            pcall(function()
                local char = LP.Character
                local tool = char:FindFirstChildOfClass("Tool")
                if not tool then return end
                local targets = {}
                local mainPart = nil
                local folder = workspace:FindFirstChild("Enemies") or workspace
                for _, v in ipairs(folder:GetChildren()) do
                    if v:IsA("Model") and v:FindFirstChild("Humanoid") and v.Humanoid.Health > 0 then
                        local hrp = v:FindFirstChild("HumanoidRootPart")
                        if hrp and (hrp.Position - char.HumanoidRootPart.Position).Magnitude < 500 then
                            hrp.CFrame = char.HumanoidRootPart.CFrame * CFrame.new(0, 0, -5)
                            hrp.CanCollide = false
                            local hitPart = GetRandomPart(v)
                            table.insert(targets, {v, hitPart})
                            mainPart = hitPart
                        end
                    end
                    if #targets >= 25 then break end
                end
                if #targets > 0 then
                    tool:Activate()
                    RegAttack:FireServer(0.0005)
                    RegHit:FireServer(mainPart, targets)
                end
            end)
        else
            -- æš«åœæ™‚ç¨å¾®ä¼‘æ¯ï¼Œç¯€çœæ•ˆèƒ½
            task.wait(0.5)
        end
    end
end)
