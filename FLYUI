local CatLib = {}
CatLib.__index = CatLib

function CatLib.Init()
    local self = setmetatable({}, CatLib)
    
    -- === å®Œå…¨æ˜¯ä½ åŸæœ¬çš„ UI ä»£ç¢¼ ===
    local main = Instance.new("ScreenGui")
    main.Name = "NekoFlyUI_V12_CleanText"
    main.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")
    main.ResetOnSpawn = false
    self.MainGui = main

    local Frame = Instance.new("Frame", main)
    Frame.Size = UDim2.new(0, 210, 0, 130) -- ä¿ç•™ä½ æœ€æ»¿æ„çš„å°ºå¯¸
    Frame.Position = UDim2.new(0.5, -105, 0.4, 0)
    Frame.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
    Frame.BackgroundTransparency = 0.25 
    Frame.Active = true
    Frame.Draggable = true
    self.MainFrame = Frame

    Instance.new("UICorner", Frame).CornerRadius = UDim.new(0, 20)
    local UIStroke = Instance.new("UIStroke", Frame)
    UIStroke.Thickness = 3
    UIStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border

    local TopBar = Instance.new("Frame", Frame)
    TopBar.Size = UDim2.new(1, 0, 0, 35)
    TopBar.BackgroundTransparency = 1
    
    local Title = Instance.new("TextLabel", TopBar)
    Title.Size = UDim2.new(1, 0, 1, 0)
    Title.Text = "NYAN PROTOCOL"
    Title.Font = Enum.Font.GothamBold
    Title.TextSize = 11
    Title.BackgroundTransparency = 1

    -- ä¸‹é¢é€™å…©å€‹æŒ‰éˆ•æ˜¯ä½ è¨­è¨ˆçš„è£é£¾/åŠŸèƒ½æŒ‰éˆ•
    local MiniBtn = Instance.new("TextButton", TopBar)
    MiniBtn.Text = "ğŸ±"; MiniBtn.Size = UDim2.new(0,30,0,30); MiniBtn.Position = UDim2.new(0,8,0,8); MiniBtn.BackgroundTransparency = 1; MiniBtn.TextSize = 22
    
    local CloseBtn = Instance.new("TextButton", TopBar)
    CloseBtn.Text = "ğŸ¾"; CloseBtn.Size = UDim2.new(0,30,0,30); CloseBtn.Position = UDim2.new(1,-38,0,8); CloseBtn.BackgroundTransparency = 1; CloseBtn.TextSize = 20

    -- é€™æ˜¯ä½ çš„æŒ‰éˆ•æ”¾ç½®å€ (ActionRow)
    local ActionRow = Instance.new("Frame", Frame)
    ActionRow.Size = UDim2.new(0, 190, 0, 40)
    ActionRow.Position = UDim2.new(0.5, -95, 0, 85)
    ActionRow.BackgroundTransparency = 1
    self.ActionRow = ActionRow

    -- === ä¿ç•™ä½ çš„ RGB é‚è¼¯ ===
    task.spawn(function()
        while main.Parent do
            local rgb = Color3.fromHSV(tick() % 5 / 5, 0.7, 1)
            UIStroke.Color = rgb
            Title.TextColor3 = rgb
            MiniBtn.TextColor3 = rgb
            CloseBtn.TextColor3 = rgb
            task.wait()
        end
    end)

    return self
end

-- ç‚ºäº†ä¸è®“ä¸»è…³æœ¬å ±éŒ¯ï¼Œæˆ‘å€‘ä¿ç•™é€™å€‹å‡½æ•¸ï¼Œä½†å®ƒç›´æ¥å›å‚³ä½ çš„ ActionRow
function CatLib:CreateTab()
    return self.ActionRow
end

-- æŒ‰éˆ•å®Œå…¨ä½¿ç”¨ä½ åŸæœ¬çš„ applyNekoStyle
function CatLib:CreateButton(parent, text, callback)
    local btn = Instance.new("TextButton", parent)
    btn.Size = UDim2.new(0, 60, 1, 0) -- é…åˆä½  ActionRow çš„ä½ˆå±€
    btn.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
    btn.BackgroundTransparency = 0.2
    btn.Text = text
    btn.TextColor3 = Color3.new(1,1,1)
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 12

    Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 12)
    local s = Instance.new("UIStroke", btn)
    s.Thickness = 1.2; s.Color = Color3.new(1,1,1); s.Transparency = 0.8

    btn.MouseButton1Click:Connect(function() callback(btn) end)
    return btn
end

return CatLib
