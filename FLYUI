local CatLib = {}
CatLib.__index = CatLib

function CatLib.Init()
    local self = setmetatable({}, CatLib)
    
    local main = Instance.new("ScreenGui")
    main.Name = "NekoOriginal_V3"
    main.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")
    main.ResetOnSpawn = false
    self.MainGui = main

    -- 主面板 (保留你原本的配色與位置)
    local Frame = Instance.new("Frame", main)
    Frame.BackgroundColor3 = Color3.fromRGB(163, 255, 137)
    Frame.BorderColor3 = Color3.fromRGB(103, 221, 213)
    Frame.Position = UDim2.new(0.1, 0, 0.38, 0)
    Frame.Size = UDim2.new(0, 190, 0, 57)
    Frame.Active = true
    Frame.Draggable = true
    self.MainFrame = Frame

    -- 標題 (貓貓飛行)
    local Title = Instance.new("TextLabel", Frame)
    Title.BackgroundColor3 = Color3.fromRGB(242, 60, 255)
    Title.Position = UDim2.new(0.47, 0, 0, 0)
    Title.Size = UDim2.new(0, 100, 0, 28)
    Title.Font = Enum.Font.SourceSans
    Title.Text = " 貓貓飛行 "
    Title.TextScaled = true
    self.TitleLabel = Title

    -- 建立一個存按鈕的 Table 方便外部調用
    self.Buttons = {}

    -- RGB 邏輯 (完全保留你的循環)
    task.spawn(function()
        while main.Parent do
            local hue = tick() % 5 / 5
            local color = Color3.fromHSV(hue, 0.6, 1)
            Frame.BackgroundColor3 = color
            Title.BackgroundColor3 = color
            for _, btn in pairs(self.Buttons) do
                btn.BackgroundColor3 = color
            end
            task.wait()
        end
    end)

    return self
end

-- 封裝一個方法來建立你原本樣式的按鈕
function CatLib:AddButton(name, text, pos, size)
    local btn = Instance.new("TextButton", self.MainFrame)
    btn.Name = name
    btn.Text = text
    btn.Position = pos
    btn.Size = size
    btn.Font = Enum.Font.SourceSans
    btn.TextColor3 = Color3.new(0, 0, 0)
    btn.TextSize = 14
    table.insert(self.Buttons, btn)
    return btn
end

return CatLib
