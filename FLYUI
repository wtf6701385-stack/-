local CatLib = {}
CatLib.__index = CatLib

function CatLib.Init()
    local self = setmetatable({}, CatLib)
    
    local main = Instance.new("ScreenGui")
    main.Name = "NekoLibrary"
    main.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")
    main.ResetOnSpawn = false
    self.MainGui = main

    local Frame = Instance.new("Frame", main)
    Frame.Size = UDim2.new(0, 360, 0, 240)
    Frame.Position = UDim2.new(0.5, -180, 0.4, 0)
    Frame.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
    Frame.BackgroundTransparency = 0.2
    Frame.Active = true
    Frame.Draggable = true
    self.MainFrame = Frame

    Instance.new("UICorner", Frame).CornerRadius = UDim.new(0, 18)
    local Stroke = Instance.new("UIStroke", Frame)
    Stroke.Thickness = 3
    Stroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border

    local TopBar = Instance.new("Frame", Frame)
    TopBar.Size = UDim2.new(1, 0, 0, 40)
    TopBar.BackgroundTransparency = 1
    
    local Title = Instance.new("TextLabel", TopBar)
    Title.Size = UDim2.new(1, 0, 1, 0)
    Title.Text = "üê± NEKO PROTOCOL üêæ"
    Title.Font = Enum.Font.GothamBold
    Title.TextSize = 14
    Title.BackgroundTransparency = 1

    local TabContainer = Instance.new("ScrollingFrame", Frame)
    TabContainer.Size = UDim2.new(0, 95, 0, 180)
    TabContainer.Position = UDim2.new(0, 10, 0, 45)
    TabContainer.BackgroundTransparency = 1
    TabContainer.ScrollBarThickness = 0
    local TabList = Instance.new("UIListLayout", TabContainer)
    TabList.Padding = UDim.new(0, 5)
    self.TabContainer = TabContainer

    local PageContainer = Instance.new("Frame", Frame)
    PageContainer.Size = UDim2.new(0, 235, 0, 180)
    PageContainer.Position = UDim2.new(0, 115, 0, 45)
    PageContainer.BackgroundTransparency = 1
    self.PageContainer = PageContainer

    task.spawn(function()
        while main.Parent do
            local rgb = Color3.fromHSV(tick() % 5 / 5, 0.7, 1)
            Stroke.Color = rgb
            Title.TextColor3 = rgb
            task.wait()
        end
    end)

    return self
end

function CatLib:CreateTab(name, isFirst)
    local tabBtn = Instance.new("TextButton", self.TabContainer)
    tabBtn.Size = UDim2.new(1, 0, 0, 32)
    tabBtn.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
    tabBtn.BackgroundTransparency = 0.4
    tabBtn.Text = name
    tabBtn.TextColor3 = Color3.new(1,1,1)
    tabBtn.Font = Enum.Font.GothamBold
    tabBtn.TextSize = 12
    Instance.new("UICorner", tabBtn).CornerRadius = UDim.new(0, 8)

    local page = Instance.new("ScrollingFrame", self.PageContainer)
    page.Size = UDim2.new(1, 0, 1, 0)
    page.BackgroundTransparency = 1
    page.Visible = isFirst or false
    page.ScrollBarThickness = 0
    Instance.new("UIListLayout", page).Padding = UDim.new(0, 6)

    tabBtn.MouseButton1Click:Connect(function()
        for _, p in pairs(self.PageContainer:GetChildren()) do p.Visible = false end
        page.Visible = true
    end)

    return page
end

function CatLib:CreateInfo(parent, icon, text)
    local info = Instance.new("TextLabel", parent)
    info.Size = UDim2.new(1, -10, 0, 28)
    info.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
    info.BackgroundTransparency = 0.5
    info.Text = icon .. " " .. text
    info.TextColor3 = Color3.new(0.85, 0.85, 0.85)
    info.Font = Enum.Font.Gotham
    info.TextSize = 12
    Instance.new("UICorner", info).CornerRadius = UDim.new(0, 6)
end

function CatLib:CreateButton(parent, text, callback)
    local btn = Instance.new("TextButton", parent)
    btn.Size = UDim2.new(1, -10, 0, 38)
    btn.BackgroundColor3 = Color3.fromRGB(65, 65, 65)
    btn.BackgroundTransparency = 0.3
    btn.Text = "  üê± " .. text
    btn.TextColor3 = Color3.new(1,1,1)
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 13
    btn.TextXAlignment = Enum.TextXAlignment.Left
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 10)
    
    local s = Instance.new("UIStroke", btn)
    s.Transparency = 0.8; s.Color = Color3.new(1,1,1)

    btn.MouseButton1Click:Connect(function()
        callback(btn)
    end)
    return btn
end

return CatLib
