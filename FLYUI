local CatLib = {}
CatLib.__index = CatLib

function CatLib.Init()
    local self = setmetatable({}, CatLib)
    local main = Instance.new("ScreenGui", game.Players.LocalPlayer:WaitForChild("PlayerGui"))
    main.ResetOnSpawn = false
    self.MainGui = main

    local Frame = Instance.new("Frame", main)
    Frame.Size = UDim2.new(0, 210, 0, 130)
    Frame.Position = UDim2.new(0.5, -105, 0.4, 0)
    Frame.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
    Frame.BackgroundTransparency = 0.25 
    Frame.Active = true
    Frame.Draggable = true

    Instance.new("UICorner", Frame).CornerRadius = UDim.new(0, 20)
    local Stroke = Instance.new("UIStroke", Frame)
    Stroke.Thickness = 3
    Stroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border

    local Title = Instance.new("TextLabel", Frame)
    Title.Size = UDim2.new(1, 0, 0, 35)
    Title.Text = "NYAN PROTOCOL V12"
    Title.Font = Enum.Font.GothamBold
    Title.TextSize = 11
    Title.BackgroundTransparency = 1

    -- 按鈕放置區
    local Container = Instance.new("Frame", Frame)
    Container.Size = UDim2.new(1, -20, 1, -45)
    Container.Position = UDim2.new(0, 10, 0, 35)
    Container.BackgroundTransparency = 1
    self.MainContainer = Container
    
    local Layout = Instance.new("UIGridLayout", Container)
    Layout.CellSize = UDim2.new(0, 90, 0, 35) -- 兩兩一排
    Layout.CellPadding = UDim2.new(0, 10, 0, 10)

    task.spawn(function()
        while main.Parent do
            local rgb = Color3.fromHSV(tick() % 5 / 5, 0.7, 1)
            Stroke.Color = rgb
            Title.TextColor3 = rgb
            task.wait()
        end
    end)
    return self
end

function CatLib:CreateButton(text, callback)
    local btn = Instance.new("TextButton", self.MainContainer)
    btn.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    btn.BackgroundTransparency = 0.3
    btn.Text = text
    btn.TextColor3 = Color3.new(1, 1, 1)
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 12
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 12)
    local s = Instance.new("UIStroke", btn)
    s.Thickness = 1.2; s.Color = Color3.new(1,1,1); s.Transparency = 0.8
    
    btn.MouseButton1Click:Connect(function() callback(btn) end)
    return btn
end

return CatLib
