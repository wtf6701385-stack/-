-- [[ ğŸ¾ å½±å­è²“è²“ï¼šç´”æ·¨åŠŸèƒ½æ ¸å¿ƒ (JK ç‰ˆ) ]] --
if not game:IsLoaded() then repeat task.wait() until game:IsLoaded() end

-- [1] ç’°å¢ƒä¿®è£œ
if not cloneref then getgenv().cloneref = function(o) return o end end
local LP = game.Players.LocalPlayer
local CommF = game:GetService("ReplicatedStorage").Remotes.CommF_

-- [2] æ ¸å¿ƒæ”»æ“Šå¼•æ“ (RegisterHit)
task.spawn(function()
    local remote = game:GetService("ReplicatedStorage").Modules.Net["RE/RegisterHit"]
    while task.wait() do
        -- ç›£è½ UI å‚³éä¾†çš„ Fast Attack è¨­å®š
        if _G.Settings.Setting["Fast Attack"] and LP.Character:FindFirstChildOfClass("Tool") then
            pcall(function()
                local tool = LP.Character:FindFirstChildOfClass("Tool")
                if tool:GetAttribute("WeaponType") == "Melee" or tool:GetAttribute("WeaponType") == "Sword" then
                    require(game.ReplicatedStorage.Modules.Net):RemoteEvent("RegisterHit", true)
                    game.ReplicatedStorage.Modules.Net["RE/RegisterAttack"]:FireServer()
                    
                    cloneref(remote):FireServer(string.gsub("RE/RegisterHit", ".", function(c)
                        return string.char(bit32.bxor(string.byte(c), math.floor(workspace:GetServerTimeNow() / 10 % 10) + 1))
                    end), bit32.bxor(101010 + 909090, game.ReplicatedStorage.Modules.Net.seed:InvokeServer() * 1))
                end
            end)
        end
    end
end)

-- [3] è‡ªå‹•åˆ·æ€ªå¾ªç’° (é€™è£¡æœƒè®€å– _G.Settings.Main["Auto Farm"])
task.spawn(function()
    while task.wait(0.5) do
        if _G.Settings.Main["Auto Farm"] then
            -- ä¸»äººï¼Œè«‹åœ¨æ­¤è™•è²¼å…¥ NEKO æª”æ¡ˆä¸­åŸæœ¬æ¥µå…¶æ¼«é•·çš„ CheckLevel() æ•¸æ“š
            -- ç¢ºä¿å®ƒèƒ½æ ¹æ“šç­‰ç´šç§»å‹•åˆ°å°æ‡‰åº§æ¨™
            print("ğŸ¾ å¤§è…¦æ­£åœ¨è‡ªå‹•åŸ·è¡Œä»»å‹™ä¸­...")
        end
    end
end)

print("ğŸ¾ JK å¤§è…¦å·²æˆåŠŸæ¥å…¥ç¥ç¶“ç¶²çµ¡ï¼")
