-- [[ ğŸ¾ å½±å­è²“è²“ï¼šç´”æ·¨åŠŸèƒ½æ ¸å¿ƒ 2026 ]] --
if not game:IsLoaded() then repeat task.wait() until game:IsLoaded() end

-- Delta ç›¸å®¹æ€§èˆ‡ FPS è§£é–
if not cloneref then getgenv().cloneref = function(o) return o end end
if setfpscap then setfpscap(1000000) end

-- æ ¸å¿ƒè®Šæ•¸ (ç”±ä¸» UI æ§åˆ¶)
_G.Settings = _G.Settings or {
    Main = {["Auto Farm"] = false, ["Select Weapon"] = "Melee", ["Auto Fast Farm"] = false},
    Setting = {["Fast Attack"] = true, ["Auto Haki"] = true, ["Player Tween Speed"] = 350},
    Stats = {["Auto Add Melee Stats"] = false}
}

local LP = game.Players.LocalPlayer
local CommF = game:GetService("ReplicatedStorage").Remotes.CommF_

-- [åŠŸèƒ½å‡½æ•¸]
function AutoHaki()
    if _G.Settings.Setting["Auto Haki"] and not LP.Character:FindFirstChild("HasBuso") then
        CommF:InvokeServer("Buso")
    end
end

function EquipWeapon(ToolSe)
    pcall(function()
        if not LP.Character:FindFirstChild(ToolSe) then
            local tool = LP.Backpack:FindFirstChild(ToolSe)
            if tool then LP.Character.Humanoid:EquipTool(tool) end
        end
    end)
end

-- [æˆ°é¬¥å¼•æ“] RegisterHit åŠ å¯†æ”»æ“Š
task.spawn(function()
    local remote = game:GetService("ReplicatedStorage").Modules.Net["RE/RegisterHit"]
    while task.wait() do
        if _G.Settings.Setting["Fast Attack"] and LP.Character:FindFirstChildOfClass("Tool") then
            pcall(function()
                local tool = LP.Character:FindFirstChildOfClass("Tool")
                if tool:GetAttribute("WeaponType") == "Melee" or tool:GetAttribute("WeaponType") == "Sword" then
                    require(game.ReplicatedStorage.Modules.Net):RemoteEvent("RegisterHit", true)
                    game.ReplicatedStorage.Modules.Net["RE/RegisterAttack"]:FireServer()
                    
                    cloneref(remote):FireServer(string.gsub("RE/RegisterHit", ".", function(c)
                        return string.char(bit32.bxor(string.byte(c), math.floor(workspace:GetServerTimeNow() / 10 % 10) + 1))
                    end), bit32.bxor(101010 + 909090, game.ReplicatedStorage.Modules.Net.seed:InvokeServer() * 1))
                end
            end)
        end
    end
end)

-- [ä¸»è¾²å ´å¾ªç’°] (æç¤ºï¼šæ­¤è™•æ‡‰ä¿ç•™ NEKO åŸå§‹æª”ä¸­ 1-2550 ç­‰çš„ CheckQuest è³‡æ–™)
task.spawn(function()
    while task.wait(0.5) do
        if _G.Settings.Main["Auto Farm"] then
            -- é€™è£¡åŸ·è¡Œ CheckQuest() å’Œç§»å‹•é‚è¼¯
            AutoHaki()
            EquipWeapon(_G.Settings.Main["Select Weapon"])
        end
    end
end)

print("ğŸ¾ æ ¸å¿ƒå¼•æ“å·²å•Ÿå‹•ï¼Œç­‰å¾…è²“è²“ UI æŒ‡ä»¤ï¼")
