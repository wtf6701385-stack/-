-- [[ ğŸ¾ è²“è²“æ ¸å¿ƒåŠŸèƒ½ (NEKOOOOO) - 2026 å®Œæ•´ç„¡çœç•¥ç‰ˆ ğŸ¾ ]] --

local Players = game:GetService("Players")
local Player = Players.LocalPlayer
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local RunService = game:GetService("RunService")
local Camera = workspace.CurrentCamera

-- =============================================================
-- ğŸ› ï¸ 1. åŸºç¤å·¥å…·èˆ‡ FPS å„ªåŒ–
-- =============================================================
_G.OptimizeFPS = function()
    pcall(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/xiaoxuan-77/-/refs/heads/main/fpsä¼˜åŒ–"))()
    end)
end

local function SafeWaitForChild(parent, childName)
    local success, result = pcall(function() return parent:WaitForChild(childName, 5) end)
    return success and result or nil
end

-- ç²å– Blox Fruits çš„æ ¸å¿ƒæ”»æ“Šé™æ§å™¨ (Remotes)
local function CheckAndGetCoreComponents()
    local Remotes, Modules, Net, RegisterAttack, RegisterHit, Enemies = nil, nil, nil, nil, nil, nil
    pcall(function()
        Remotes = SafeWaitForChild(ReplicatedStorage, "Remotes")
        Modules = SafeWaitForChild(ReplicatedStorage, "Modules")
        Net = Modules and Modules:FindFirstChild("Net") or nil
        RegisterAttack = Net and Net:FindFirstChild("RE/RegisterAttack") or nil
        RegisterHit = Net and Net:FindFirstChild("RE/RegisterHit") or nil
        Enemies = SafeWaitForChild(workspace, "Enemies")
    end)
    return Remotes, Net, RegisterAttack, RegisterHit, Enemies
end

local function IsAlive(character)
    return character and character:FindFirstChild("Humanoid") and character.Humanoid.Health > 0
end

-- éš¨æ©Ÿç²å–ç›®æ¨™èº«é«”éƒ¨ä½ (é˜²æ­¢åªæ‰“é ­è¢«åµæ¸¬)
local function GetRandomValidPart(target)
    local allParts = target:GetDescendants()
    local validParts = {}
    local humanoidRootPart = target:FindFirstChild("HumanoidRootPart")
    local boneParts = humanoidRootPart and humanoidRootPart.Parent:GetDescendants() or {}
    for _, part in ipairs(allParts) do
        if part:IsA("BasePart") and part.CanCollide and table.find(boneParts, part) then
            table.insert(validParts, part)
        end
    end
    return #validParts > 0 and validParts[math.random(1, #validParts)] or target:FindFirstChild("HumanoidRootPart")
end

-- =============================================================
-- ğŸ‘€ 2. è¦–é‡èˆ‡ç§»å‹•åŠ é€Ÿç³»çµ±
-- =============================================================
task.spawn(function()
    while true do
        if _G.NekoRunning and _G.Settings then
            pcall(function()
                -- è¦–é‡æ§åˆ¶
                Camera.FieldOfView = _G.Settings.FOV or 70
                Player.CameraMaxZoomDistance = _G.Settings.ZoomDist or 128
            end)
        end
        task.wait(0.5)
    end
end)

RunService.Heartbeat:Connect(function()
    if not _G.NekoRunning or not _G.Settings or not _G.Settings.SpeedEnabled then return end
    local char = Player.Character
    if char and char:FindFirstChild("Humanoid") then
        local hum = char.Humanoid
        -- åªæœ‰åœ¨ç§»å‹•æ™‚æ‰åŠ é€Ÿï¼Œé¿å…ç«™ç«‹æ™‚æ»‘å‹•
        if hum.MoveDirection.Magnitude > 0 then
            char:TranslateBy(hum.MoveDirection * ((_G.Settings.CatSpeedValue or 50) / 10))
        end
    end
end)

-- =============================================================
-- ğŸ”¥ 3. è‡ªå‹• V4 è¦ºé†’ç³»çµ±
-- =============================================================
task.spawn(function()
    while true do
        task.wait(1) -- æ¯ç§’æª¢æŸ¥ä¸€æ¬¡ï¼Œä¸å¡é “
        if _G.NekoRunning and _G.AutoV4 then
            pcall(function()
                local char = Player.Character
                local backpack = Player:FindFirstChild("Backpack")
                
                -- é›™é‡æœå°‹ï¼šå…ˆæ‰¾èº«ä¸Šï¼Œå†æ‰¾èƒŒåŒ…
                local Awakening = (char and char:FindFirstChild("Awakening")) or 
                                  (backpack and backpack:FindFirstChild("Awakening"))
                
                if Awakening then
                    local RemoteFunc = Awakening:FindFirstChild("RemoteFunction")
                    if RemoteFunc and RemoteFunc:IsA("RemoteFunction") then
                        RemoteFunc:InvokeServer(true) -- ç™¼å‹•è¦ºé†’ï¼
                    end
                end
            end)
        end
    end
end)

-- =============================================================
-- âš”ï¸ 4. ç¥åˆ€æ”»æ“Šå¼•æ“ (å®Œæ•´ä¿ç•™)
-- =============================================================
local FastAttack = {
    Distance = 3000, -- æ”»æ“Šè·é›¢
    attackMobs = true,
    attackPlayers = true
}

-- è™•ç†æ€ªç‰© (åŒ…å«æ‹‰æ€ªé‚è¼¯)
local function ProcessEnemies(OthersEnemies, Folder)
    if not Folder or not FastAttack.attackMobs then return nil end
    local BasePart = nil
    for _, Enemy in ipairs(Folder:GetChildren()) do
        if Enemy == Player.Character or not IsAlive(Enemy) then continue end
        local foundPart = GetRandomValidPart(Enemy)
        
        -- è·é›¢åˆ¤æ–·
        if foundPart and Player:DistanceFromCharacter(foundPart.Position) < (_G.Settings.Distance or FastAttack.Distance) then
            -- ğŸ¾ è²“æŠ“æ‹‰æ€ª (Pull Enemies)
            if _G.Settings.PullEnemies then
                local eRoot = Enemy:FindFirstChild("HumanoidRootPart")
                local myRoot = Player.Character and Player.Character:FindFirstChild("HumanoidRootPart")
                -- æŠŠæ€ªç‰©æ‹‰åˆ°èº«å¾Œ 3 æ ¼ï¼Œæ–¹ä¾¿æ”»æ“Š
                if eRoot and myRoot then eRoot.CFrame = myRoot.CFrame * CFrame.new(0, 0, -3) end
            end
            table.insert(OthersEnemies, {Enemy, foundPart})
            BasePart = foundPart
        end
    end
    return BasePart
end

-- è™•ç†çœŸå¯¦ç©å®¶ (PVP)
local function ProcessRealPlayers(OthersEnemies)
    if not FastAttack.attackPlayers then return nil end
    local BasePart = nil
    for _, OtherPlayer in ipairs(Players:GetPlayers()) do
        if OtherPlayer == Player then continue end
        local OtherChar = OtherPlayer.Character
        if not IsAlive(OtherChar) then continue end
        local foundPart = GetRandomValidPart(OtherChar)
        
        if foundPart and Player:DistanceFromCharacter(foundPart.Position) < (_G.Settings.Distance or FastAttack.Distance) then
            table.insert(OthersEnemies, {OtherChar, foundPart})
            BasePart = foundPart
        end
    end
    return BasePart
end

-- âš”ï¸ æ”»æ“Šä¸»å¾ªç’° (Thread)
task.spawn(function()
    while true do
        local delay = (_G.Settings and _G.Settings.ClickDelay) or 0.1
        task.wait(delay)

        if _G.NekoRunning and _G.NekoAttack and _G.Settings.Mode ~= "None" then
            pcall(function()
                local Equipped = Player.Character and Player.Character:FindFirstChildOfClass("Tool")
                -- åªæœ‰è£å‚™éæ§æ¢°æ­¦å™¨æ™‚æ‰æ”»æ“Š
                if Equipped and Equipped.ToolTip ~= "Gun" then
                    local OthersEnemies = {}
                    local _, _, regAtk, regHit, EnemiesFolder = CheckAndGetCoreComponents()
                    
                    if EnemiesFolder then
                        -- æ ¹æ“šæ¨¡å¼é¸æ“‡æ”»æ“Šå°è±¡
                        local Part1 = (_G.Settings.Mode == "Mob" or _G.Settings.Mode == "All") and ProcessEnemies(OthersEnemies, EnemiesFolder) or nil
                        local Part2 = (_G.Settings.Mode == "All") and ProcessRealPlayers(OthersEnemies) or nil
                        
                        local TargetPart = Part1 or Part2
                        
                        -- ç™¼é€æ”»æ“Šå°åŒ…
                        if TargetPart and #OthersEnemies > 0 and regAtk and regHit then
                            regAtk:FireServer(delay)
                            regHit:FireServer(TargetPart, OthersEnemies)
                        end
                    end
                end
            end)
        end
    end
end)

-- =============================================================
-- ğŸ“ 5. æ™ºæ…§é»äººå¼•æ“ (æ¥æ”¶ä¸»è…³æœ¬æŒ‡ä»¤)
-- =============================================================
RunService.Heartbeat:Connect(function()
    -- æª¢æŸ¥å…¨å±€é–‹é—œ å’Œ æ˜¯å¦æœ‰é–å®šç›®æ¨™ (ç”±ä¸»è…³æœ¬é¸å–®è¨­å®š)
    if _G.NekoRunning and _G.Settings.StickyEnabled and _G.Settings.StickyTarget then
        local myChar = Player.Character
        local tChar = _G.Settings.StickyTarget.Character
        
        if myChar and tChar and IsAlive(tChar) then
            local myRoot = myChar:FindFirstChild("HumanoidRootPart")
            local tRoot = tChar:FindFirstChild("HumanoidRootPart")
            
            if myRoot and tRoot then
                -- è¨ˆç®—ç›®æ¨™é» (åŠ ä¸Šåç§»é‡)
                local goalCF = tRoot.CFrame * (_G.Settings.StickyOffset or CFrame.new(3, 0, 7))
                local dist = (myRoot.Position - goalCF.Position).Magnitude
                
                -- æ··åˆç§»å‹•é‚è¼¯
                if dist > (_G.Settings.SnapDistance or 500) then
                    myRoot.CFrame = goalCF -- ğŸš€ 500ç±³å¤–ï¼šç¬ç§»
                else
                    myRoot.CFrame = myRoot.CFrame:Lerp(goalCF, _G.Settings.LerpSpeed or 0.35) -- âœ¨ è¿‘è·é›¢ï¼šæ¥µé€Ÿå¸é™„
                end
            end
        end
    end
end)

print("ğŸ¾ NEKO æ ¸å¿ƒåŠŸèƒ½ (NEKOOOOO) å®Œæ•´è¼‰å…¥å®Œç•¢ï¼æ”»æ“Šã€é»äººã€å„ªåŒ–å…¨æ•¸å°±ç·’å–µï¼")
