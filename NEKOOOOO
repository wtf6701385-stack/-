-- [[ ğŸ¾ è²“è²“æ ¸å¿ƒåŠŸèƒ½ (NEKOOOOO) - 2026 ç¥åˆ€å¼•æ“ç‰ˆ ğŸ¾ ]] --

local Players = game:GetService("Players")
local Player = Players.LocalPlayer
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local RunService = game:GetService("RunService")
local Camera = workspace.CurrentCamera

-- âœ¨ [æ–°å¢ï¼šå„ªåŒ–åŸ·è¡Œå™¨] 
_G.OptimizeFPS = function()
    pcall(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/xiaoxuan-77/-/refs/heads/main/fpsä¼˜åŒ–"))()
    end)
end

-- ğŸ›¡ï¸ 1. æ ¸å¿ƒçµ„ä»¶å®‰å…¨ç²å–å‡½æ•¸
local function SafeWaitForChild(parent, childName)
    local success, result = pcall(function() return parent:WaitForChild(childName, 5) end)
    return success and result or nil
end

local function CheckAndGetCoreComponents()
    local Remotes, Modules, Net, RegisterAttack, RegisterHit, Enemies = nil, nil, nil, nil, nil, nil
    pcall(function()
        Remotes = SafeWaitForChild(ReplicatedStorage, "Remotes")
        Modules = SafeWaitForChild(ReplicatedStorage, "Modules")
        Net = Modules and Modules:FindFirstChild("Net") or nil
        RegisterAttack = Net and Net:FindFirstChild("RE/RegisterAttack") or nil
        RegisterHit = Net and Net:FindFirstChild("RE/RegisterHit") or nil
        Enemies = SafeWaitForChild(workspace, "Enemies")
    end)
    return Remotes, Net, RegisterAttack, RegisterHit, Enemies
end

-- ğŸ›¡ï¸ 2. å­˜æ´»åˆ¤å®šèˆ‡éƒ¨ä½ç²å–
local function IsAlive(character)
    return character and character:FindFirstChild("Humanoid") and character.Humanoid.Health > 0
end

local function GetRandomValidPart(target)
    local allParts = target:GetDescendants()
    local validParts = {}
    local humanoidRootPart = target:FindFirstChild("HumanoidRootPart")
    local boneParts = humanoidRootPart and humanoidRootPart.Parent:GetDescendants() or {}
    for _, part in ipairs(allParts) do
        if part:IsA("BasePart") and part.CanCollide and table.find(boneParts, part) then
            table.insert(validParts, part)
        end
    end
    return #validParts > 0 and validParts[math.random(1, #validParts)] or target:FindFirstChild("HumanoidRootPart")
end

-- âœ¨ [è¦–é‡èˆ‡åŠ é€Ÿç³»çµ±]
task.spawn(function()
    while true do
        if _G.NekoRunning and _G.Settings then
            pcall(function()
                Camera.FieldOfView = _G.Settings.FOV
                Player.CameraMaxZoomDistance = _G.Settings.ZoomDist
            end)
        end
        task.wait(0.5)
    end
end)

RunService.Heartbeat:Connect(function()
    if not _G.NekoRunning or not _G.Settings or not _G.Settings.SpeedEnabled then return end
    local char = Player.Character
    if char and char:FindFirstChild("Humanoid") then
        local hum = char.Humanoid
        if hum.MoveDirection.Magnitude > 0 then
            char:TranslateBy(hum.MoveDirection * (_G.Settings.CatSpeedValue / 10))
        end
    end
end)

-- ğŸ”¥ [æ–°å¢ï¼šè‡ªå‹• V4 è¦ºé†’ç³»çµ± (å·²å°è£)] 
task.spawn(function()
    while true do
        task.wait(1) -- æ¯ç§’æª¢æŸ¥ä¸€æ¬¡ï¼Œç©©å®šä¸å¡é “
        if _G.NekoRunning and _G.AutoV4 then
            pcall(function()
                local char = Player.Character
                local backpack = Player:FindFirstChild("Backpack")
                
                -- é›™é‡æœå°‹ï¼šå…ˆæ‰¾èº«ä¸Šï¼Œå†æ‰¾èƒŒåŒ…
                local Awakening = (char and char:FindFirstChild("Awakening")) or 
                                  (backpack and backpack:FindFirstChild("Awakening"))
                
                if Awakening then
                    local RemoteFunc = Awakening:FindFirstChild("RemoteFunction")
                    if RemoteFunc and RemoteFunc:IsA("RemoteFunction") then
                        RemoteFunc:InvokeServer(true) -- ç™¼å‹•è¦ºé†’ï¼
                    end
                end
            end)
        end
    end
end)

-- âš”ï¸ 3. ç¥åˆ€ä¸»å¼•æ“ (å°æ¥ NEKO UI)
local FastAttack = {
    Distance = 2500,
    attackMobs = true,
    attackPlayers = true
}

-- æƒæé‚è¼¯ Aï¼šæ€ªç‰©
local function ProcessEnemies(OthersEnemies, Folder)
    if not Folder or not FastAttack.attackMobs then return nil end
    local BasePart = nil
    for _, Enemy in ipairs(Folder:GetChildren()) do
        if Enemy == Player.Character or not IsAlive(Enemy) then continue end
        local foundPart = GetRandomValidPart(Enemy)
        if foundPart and Player:DistanceFromCharacter(foundPart.Position) < (_G.Settings.Distance or FastAttack.Distance) then
            -- ğŸ¾ æ•´åˆæ‹‰æ€ªåŠŸèƒ½
            if _G.Settings.PullEnemies then
                local eRoot = Enemy:FindFirstChild("HumanoidRootPart")
                local myRoot = Player.Character and Player.Character:FindFirstChild("HumanoidRootPart")
                if eRoot and myRoot then eRoot.CFrame = myRoot.CFrame * CFrame.new(0, 0, -3) end
            end
            table.insert(OthersEnemies, {Enemy, foundPart})
            BasePart = foundPart
        end
    end
    return BasePart
end

-- æƒæé‚è¼¯ Bï¼šç©å®¶
local function ProcessRealPlayers(OthersEnemies)
    if not FastAttack.attackPlayers then return nil end
    local BasePart = nil
    for _, OtherPlayer in ipairs(Players:GetPlayers()) do
        if OtherPlayer == Player then continue end
        local OtherChar = OtherPlayer.Character
        if not IsAlive(OtherChar) then continue end
        local foundPart = GetRandomValidPart(OtherChar)
        if foundPart and Player:DistanceFromCharacter(foundPart.Position) < (_G.Settings.Distance or FastAttack.Distance) then
            table.insert(OthersEnemies, {OtherChar, foundPart})
            BasePart = foundPart
        end
    end
    return BasePart
end

-- âš”ï¸ ç¥åˆ€æ­»å¾ªç’° (æ ¸å¿ƒç™¼å‹•)
task.spawn(function()
    while true do
        local delay = (_G.Settings and _G.Settings.ClickDelay) or 0.1
        task.wait(delay)

        if _G.NekoRunning and _G.NekoAttack and _G.Settings.Mode ~= "None" then
            pcall(function()
                local Equipped = Player.Character and Player.Character:FindFirstChildOfClass("Tool")
                if Equipped and Equipped.ToolTip ~= "Gun" then
                    local OthersEnemies = {}
                    local _, _, regAtk, regHit, EnemiesFolder = CheckAndGetCoreComponents()
                    
                    if EnemiesFolder then
                        local Part1 = ProcessEnemies(OthersEnemies, EnemiesFolder)
                        local Part2 = (_G.Settings.Mode == "All") and ProcessRealPlayers(OthersEnemies) or nil
                        
                        local TargetPart = Part1 or Part2
                        if TargetPart and #OthersEnemies > 0 and regAtk and regHit then
                            regAtk:FireServer(delay)
                            regHit:FireServer(TargetPart, OthersEnemies)
                        end
                    end
                end
            end)
        end
    end
end)

print("ğŸ¾ NEKOOOOO ç¥åˆ€å…¨åŠŸèƒ½å¼•æ“ (å« V4) å·²å•Ÿå‹•ï¼å‚·å®³åˆ¤å®šå·²é–å®šå–µã€‚")
