local Players = game:GetService("Players")
local UIS = game:GetService("UserInputService")
local Player = Players.LocalPlayer

local Lib = {}
Lib.__index = Lib

function Lib.Init()
    local self = setmetatable({}, Lib)

    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Name = "NEKO_UI"
    ScreenGui.ResetOnSpawn = false
    ScreenGui.Parent = Player:WaitForChild("PlayerGui")

    local Main = Instance.new("Frame", ScreenGui)
    Main.Size = UDim2.new(0, 520, 0, 360)
    Main.Position = UDim2.new(0.5, -260, 0.5, -180)
    Main.BackgroundColor3 = Color3.fromRGB(20,20,25)
    Main.BorderSizePixel = 0
    Main.Active = true
    Main.Draggable = true
    Instance.new("UICorner", Main).CornerRadius = UDim.new(0,16)

    local Title = Instance.new("TextLabel", Main)
    Title.Size = UDim2.new(1,0,0,40)
    Title.BackgroundColor3 = Color3.fromRGB(180,180,180)
    Title.Text = " 貓貓 NEKO UI "
    Title.Font = Enum.Font.GothamBold
    Title.TextSize = 18
    Title.TextColor3 = Color3.fromRGB(30,30,30)
    Instance.new("UICorner", Title).CornerRadius = UDim.new(0,12)

    local Tabs = Instance.new("Frame", Main)
    Tabs.Position = UDim2.new(0,0,0,42)
    Tabs.Size = UDim2.new(0,130,1,-42)
    Tabs.BackgroundTransparency = 1

    local Pages = Instance.new("Frame", Main)
    Pages.Position = UDim2.new(0,130,0,42)
    Pages.Size = UDim2.new(1,-130,1,-42)
    Pages.BackgroundTransparency = 1

    local TabLayout = Instance.new("UIListLayout", Tabs)
    TabLayout.Padding = UDim.new(0,6)

    self.Pages = Pages
    self.Tabs = Tabs
    self.CurrentPage = nil

    function self:CreateTab(name, default)
        local Btn = Instance.new("TextButton", Tabs)
        Btn.Size = UDim2.new(1,-10,0,34)
        Btn.Text = " "..name
        Btn.Font = Enum.Font.Gotham
        Btn.TextSize = 14
        Btn.TextXAlignment = Left
        Btn.BackgroundColor3 = Color3.fromRGB(35,35,45)
        Btn.TextColor3 = Color3.fromRGB(255,255,255)
        Btn.BorderSizePixel = 0
        Instance.new("UICorner", Btn).CornerRadius = UDim.new(0,8)

        local Page = Instance.new("ScrollingFrame", Pages)
        Page.Size = UDim2.new(1,0,1,0)
        Page.CanvasSize = UDim2.new(0,0,0,0)
        Page.ScrollBarThickness = 0
        Page.BackgroundTransparency = 1
        Page.Visible = false

        local Layout = Instance.new("UIListLayout", Page)
        Layout.Padding = UDim.new(0,8)

        Layout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
            Page.CanvasSize = UDim2.new(0,0,0,Layout.AbsoluteContentSize.Y + 10)
        end)

        Btn.MouseButton1Click:Connect(function()
            if self.CurrentPage then
                self.CurrentPage.Visible = false
            end
            Page.Visible = true
            self.CurrentPage = Page
        end)

        if default then
            Page.Visible = true
            self.CurrentPage = Page
        end

        return Page
    end

    function self:CreateButton(parent, text, callback)
        local Btn = Instance.new("TextButton", parent)
        Btn.Size = UDim2.new(1,-10,0,36)
        Btn.Text = " "..text
        Btn.Font = Enum.Font.Gotham
        Btn.TextSize = 14
        Btn.TextXAlignment = Left
        Btn.BackgroundColor3 = Color3.fromRGB(40,40,55)
        Btn.TextColor3 = Color3.fromRGB(255,255,255)
        Btn.BorderSizePixel = 0
        Instance.new("UICorner", Btn).CornerRadius = UDim.new(0,8)

        Btn.MouseButton1Click:Connect(function()
            if callback then
                callback(Btn)
            end
        end)

        return Btn
    end

    function self:CreateInfo(parent, title, desc)
        local Box = Instance.new("Frame", parent)
        Box.Size = UDim2.new(1,-10,0,60)
        Box.BackgroundColor3 = Color3.fromRGB(35,35,50)
        Box.BorderSizePixel = 0
        Instance.new("UICorner", Box).CornerRadius = UDim.new(0,8)

        local T = Instance.new("TextLabel", Box)
        T.Size = UDim2.new(1,-10,0,22)
        T.Position = UDim2.new(0,8,0,6)
        T.Text = title
        T.Font = Enum.Font.GothamBold
        T.TextSize = 14
        T.TextXAlignment = Left
        T.BackgroundTransparency = 1
        T.TextColor3 = Color3.fromRGB(255,255,255)

        local D = Instance.new("TextLabel", Box)
        D.Size = UDim2.new(1,-10,0,26)
        D.Position = UDim2.new(0,8,0,30)
        D.TextWrapped = true
        D.TextYAlignment = Top
        D.TextXAlignment = Left
        D.Text = desc
        D.Font = Enum.Font.Gotham
        D.TextSize = 12
        D.BackgroundTransparency = 1
        D.TextColor3 = Color3.fromRGB(200,200,200)

        return Box
    end

    return self
end

return Lib
