-- [[ ğŸ¾ è²“è²“ UI æ¡†æ¶ (CAT UI LIBRARY) ğŸ¾ ]] --
-- è²“è²“è£½ä½œ | å°ˆç‚º GitHub & Delta å„ªåŒ–
-- åŠŸèƒ½ï¼šç´” UI å°è£ã€æ”¯æ´æ‹–æ‹½ã€é©é…ç§»å‹•ç«¯

local library = {}
local services = setmetatable({}, {__index = function(t, k) return game:GetService(k) end})

-- ã€ ğŸ› ï¸ æ ¸å¿ƒå·¥å…·ï¼šè¬ç”¨æ‹–æ‹½å‡½æ•¸ ã€‘
-- æ”¯æ´æ‰€æœ‰ GUI å…ƒç´ ï¼Œé©é… Delta è§¸æ§èˆ‡æ»‘é¼ 
local function MakeDraggable(obj)
    local dragging, dragInput, dragStart, startPos
    obj.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = true; dragStart = input.Position; startPos = obj.Position
            input.Changed:Connect(function() if input.UserInputState == Enum.UserInputState.End then dragging = false end end)
        end
    end)
    services.UserInputService.InputChanged:Connect(function(input)
        if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
            local delta = input.Position - dragStart
            obj.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        end
    end)
end

-- ã€ ğŸ¨ ä¸»æ¡†æ¶æ§‹å»º ã€‘
function library.new(name)
    local sg = Instance.new("ScreenGui", services.CoreGui)
    sg.Name = "NekoTerminal_Lib"
    sg.ResetOnSpawn = false

    -- ä¸»è¦–çª— (é è¨­éš±è—)
    local Main = Instance.new("Frame", sg)
    Main.Size = UDim2.new(0, 450, 0, 280)
    Main.Position = UDim2.new(0.5, -225, 0.5, -140)
    Main.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
    Main.BackgroundTransparency = 0.4
    Main.Visible = false 
    Instance.new("UICorner", Main).CornerRadius = UDim.new(0, 10)
    
    -- é ‚éƒ¨è£é£¾ç·š
    local Line = Instance.new("Frame", Main)
    Line.Size = UDim2.new(1, 0, 0, 2)
    Line.BackgroundColor3 = Color3.fromRGB(255, 120, 180)
    Line.BorderSizePixel = 0

    -- å´é‚Šæ¬„
    local Side = Instance.new("Frame", Main)
    Side.Size = UDim2.new(0, 115, 1, 0)
    Side.BackgroundColor3 = Color3.fromRGB(10, 10, 10)
    Side.BackgroundTransparency = 0.3
    Instance.new("UICorner", Side).CornerRadius = UDim.new(0, 10)

    local Title = Instance.new("TextLabel", Side)
    Title.Size = UDim2.new(1, 0, 0, 45); Title.Text = "ğŸ¾ " .. name; Title.TextColor3 = Color3.fromRGB(255, 120, 180); Title.Font = "GothamBold"; Title.TextSize = 14; Title.BackgroundTransparency = 1

    local TabContainer = Instance.new("ScrollingFrame", Side)
    TabContainer.Size = UDim2.new(1, 0, 1, -50); TabContainer.Position = UDim2.new(0, 0, 0, 45); TabContainer.BackgroundTransparency = 1; TabContainer.ScrollBarThickness = 0
    Instance.new("UIListLayout", TabContainer).Padding = UDim.new(0, 5)

    local PageContainer = Instance.new("Frame", Main)
    PageContainer.Size = UDim2.new(1, -130, 1, -15); PageContainer.Position = UDim2.new(0, 125, 0, 8); PageContainer.BackgroundTransparency = 1

    -- å•Ÿå‹•æ‹–æ‹½
    MakeDraggable(Main)

    local window = { currentTab = nil }

    -- å°å‡ºåŠŸèƒ½ï¼šæ§åˆ¶ UI é¡¯ç¤ºç‹€æ…‹
    function window:Toggle()
        Main.Visible = not Main.Visible
    end

    -- å°å‡ºåŠŸèƒ½ï¼šæä¾›æ‹–æ‹½å‡½æ•¸çµ¦å¤–éƒ¨æŒ‰éˆ•ä½¿ç”¨
    function window:AddDrag(obj)
        MakeDraggable(obj)
    end

    function window:Tab(tName)
        local Page = Instance.new("ScrollingFrame", PageContainer)
        Page.Size = UDim2.new(1, 0, 1, 0); Page.BackgroundTransparency = 1; Page.Visible = false; Page.ScrollBarThickness = 0
        Instance.new("UIListLayout", Page).Padding = UDim.new(0, 8)

        local TabBtn = Instance.new("TextButton", TabContainer)
        TabBtn.Size = UDim2.new(1, -10, 0, 32); TabBtn.BackgroundColor3 = Color3.fromRGB(30,30,35); TabBtn.Text = tName; TabBtn.TextColor3 = Color3.fromRGB(150, 150, 150); TabBtn.Font = "GothamMedium"; TabBtn.TextSize = 11; Instance.new("UICorner", TabBtn)

        TabBtn.MouseButton1Click:Connect(function()
            if window.currentTab then window.currentTab.Page.Visible = false; window.currentTab.Btn.TextColor3 = Color3.fromRGB(150, 150, 150) end
            Page.Visible = true; TabBtn.TextColor3 = Color3.fromRGB(255, 120, 180)
            window.currentTab = {Page = Page, Btn = TabBtn}
        end)

        if not window.currentTab then Page.Visible = true; TabBtn.TextColor3 = Color3.fromRGB(255, 120, 180); window.currentTab = {Page = Page, Btn = TabBtn} end

        local tab = {}
        function tab:Section(sName)
            local Sec = Instance.new("Frame", Page)
            Sec.Size = UDim2.new(0.96, 0, 0, 35); Sec.BackgroundColor3 = Color3.fromRGB(35, 35, 40); Sec.BackgroundTransparency = 0.5; Instance.new("UICorner", Sec)
            
            local STitle = Instance.new("TextLabel", Sec)
            STitle.Size = UDim2.new(1, -10, 0, 25); STitle.Position = UDim2.new(0, 10, 0, 0); STitle.Text = sName; STitle.TextColor3 = Color3.fromRGB(255, 120, 180); STitle.Font = "GothamBold"; STitle.TextSize = 12; STitle.TextXAlignment = "Left"; STitle.BackgroundTransparency = 1
            
            local Container = Instance.new("Frame", Sec); Container.Position = UDim2.new(0, 0, 0, 28); Container.Size = UDim2.new(1, 0, 0, 0); Container.BackgroundTransparency = 1
            local CL = Instance.new("UIListLayout", Container); CL.Padding = UDim.new(0, 5); CL.HorizontalAlignment = "Center"
            CL:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function() Sec.Size = UDim2.new(0.96, 0, 0, CL.AbsoluteContentSize.Y + 35) end)

            local elements = {}
            function elements:Button(txt, cb)
                local b = Instance.new("TextButton", Container); b.Size = UDim2.new(0.92, 0, 0, 30); b.BackgroundColor3 = Color3.fromRGB(45, 45, 50); b.Text = txt; b.TextColor3 = Color3.fromRGB(255,255,255); b.Font = "Gotham"; b.TextSize = 11; Instance.new("UICorner", b); b.MouseButton1Click:Connect(cb)
            end
            function elements:Toggle(txt, cb)
                local b = Instance.new("TextButton", Container); b.Size = UDim2.new(0.92, 0, 0, 30); b.BackgroundColor3 = Color3.fromRGB(40, 40, 45); b.Text = "  "..txt; b.TextColor3 = Color3.fromRGB(255,255,255); b.Font = "Gotham"; b.TextSize = 11; b.TextXAlignment = "Left"; Instance.new("UICorner", b)
                local s = Instance.new("Frame", b); s.Size = UDim2.new(0, 30, 0, 14); s.Position = UDim2.new(1, -10, 0.5, 0); s.AnchorPoint = Vector2.new(1, 0.5); s.BackgroundColor3 = Color3.fromRGB(60, 60, 60); Instance.new("UICorner", s).CornerRadius = UDim.new(1, 0)
                local t = false; b.MouseButton1Click:Connect(function() t = not t; services.TweenService:Create(s, TweenInfo.new(0.2), {BackgroundColor3 = t and Color3.fromRGB(255, 120, 180) or Color3.fromRGB(60, 60, 60)}):Play(); cb(t) end)
            end
            function elements:Textbox(txt, hold, cb)
                local f = Instance.new("Frame", Container); f.Size = UDim2.new(0.92, 0, 0, 30); f.BackgroundColor3 = Color3.fromRGB(30, 30, 35); Instance.new("UICorner", f)
                local l = Instance.new("TextLabel", f); l.Size = UDim2.new(0.5, 0, 1, 0); l.Position = UDim2.new(0, 10, 0, 0); l.Text = txt; l.TextColor3 = Color3.fromRGB(255,255,255); l.TextSize = 10; l.Font = "Gotham"; l.TextXAlignment = "Left"; l.BackgroundTransparency = 1
                local i = Instance.new("TextBox", f); i.Size = UDim2.new(0.4, 0, 0, 20); i.Position = UDim2.new(1, -5, 0.5, 0); i.AnchorPoint = Vector2.new(1, 0.5); i.BackgroundColor3 = Color3.fromRGB(20, 20, 25); i.Text = ""; i.PlaceholderText = hold; i.TextColor3 = Color3.fromRGB(255, 120, 180); i.Font = "Gotham"; i.TextSize = 10; Instance.new("UICorner", i); i.FocusLost:Connect(function() cb(i.Text) end)
            end
            return elements
        end
        return tab
    end
    return window, sg
end

return library
