-- [[ GitHub: NEKOUI - å°æ¥å¤–éƒ¨è…³æœ¬æœ€çµ‚ç‰ˆ ]]
local UI = {}

function UI:Init()
    local CoreGui = game:GetService("CoreGui")
    local RunService = game:GetService("RunService")
    local TweenService = game:GetService("TweenService")
    
    if CoreGui:FindFirstChild("NEKOUI_MAIN") then CoreGui.NEKOUI_MAIN:Destroy() end

    local Gui = Instance.new("ScreenGui", CoreGui)
    Gui.Name = "NEKOUI_MAIN"
    Gui.ResetOnSpawn = false

    -- ä¸»æ¡†æ¶ (ä½¿ç”¨ ClipsDescendants é…åˆå…§ç¸®é‚Šæ¡†è§£æ±ºç©¿å¹«)
    local Main = Instance.new("Frame", Gui)
    Main.Size = UDim2.new(0, 420, 0, 260)
    Main.Position = UDim2.new(0.5, -210, 0.5, -130)
    Main.BackgroundColor3 = Color3.fromRGB(20, 20, 24)
    Main.Active = true
    Main.Draggable = true
    Main.ClipsDescendants = true
    Instance.new("UICorner", Main).CornerRadius = UDim.new(0, 14)

    -- å½©è™¹é‚Šæ¡† (ä¿®æ­£ç©¿å¹«ï¼šä½¿ç”¨ Border æ¨¡å¼ä¸¦å¾®èª¿åšåº¦)
    local Stroke = Instance.new("UIStroke", Main)
    Stroke.Thickness = 2.5
    Stroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
    RunService.RenderStepped:Connect(function() 
        Stroke.Color = Color3.fromHSV((tick() * 0.4) % 1, 0.6, 1) 
    end)

    -- æ¨™é¡Œåˆ—
    local Top = Instance.new("Frame", Main)
    Top.Size = UDim2.new(1, 0, 0, 42)
    Top.BackgroundColor3 = Color3.fromRGB(30, 30, 35)
    Top.BorderSizePixel = 0
    
    local T = Instance.new("TextLabel", Top)
    T.Size = UDim2.new(1, -60, 1, 0); T.Position = UDim2.new(0, 15, 0, 0)
    T.Text = "  à¸…^â€¢ï»Œâ€¢^à¸…  NEKO HUB"; T.TextColor3 = Color3.new(1, 1, 1)
    T.Font = "GothamBold"; T.TextSize = 14; T.TextXAlignment = "Left"; T.BackgroundTransparency = 1

    -- æ”¶åˆæŒ‰éˆ•
    local MiniBtn = Instance.new("TextButton", Top)
    MiniBtn.Size = UDim2.new(0, 30, 0, 30); MiniBtn.Position = UDim2.new(1, -40, 0.5, -15)
    MiniBtn.BackgroundColor3 = Color3.fromRGB(120, 0, 255); MiniBtn.Text = "â€”"
    MiniBtn.TextColor3 = Color3.new(1, 1, 1); MiniBtn.Font = "GothamBold"; MiniBtn.TextSize = 16
    Instance.new("UICorner", MiniBtn).CornerRadius = UDim.new(1, 0)

    local Content = Instance.new("Frame", Main)
    Content.Size = UDim2.new(1, 0, 1, -42); Content.Position = UDim2.new(0, 0, 0, 42); Content.BackgroundTransparency = 1

    -- æ”¶åˆå‹•ç•«
    local opened = true
    local fullSize = Main.Size
    MiniBtn.MouseButton1Click:Connect(function()
        opened = not opened
        Content.Visible = opened
        Main:TweenSize(opened and fullSize or UDim2.new(0, 200, 0, 42), "Out", "Quart", 0.3, true)
        MiniBtn.Text = opened and "â€”" or "+"
    end)

    -- å´é‚Šæ¬„èˆ‡åˆ†é å€
    local TabBar = Instance.new("Frame", Content)
    TabBar.Size = UDim2.new(0, 110, 1, -16); TabBar.Position = UDim2.new(0, 10, 0, 8); TabBar.BackgroundTransparency = 1
    local TabLayout = Instance.new("UIListLayout", TabBar); TabLayout.Padding = UDim.new(0, 6)

    local Pages = Instance.new("Frame", Content)
    Pages.Size = UDim2.new(1, -140, 1, -16); Pages.Position = UDim2.new(0, 130, 0, 8); Pages.BackgroundTransparency = 1

    local LibLogic = {}
    
    function LibLogic:CreateTab(name, default)
        local Page = Instance.new("ScrollingFrame", Pages)
        Page.Size = UDim2.new(1, 0, 1, 0); Page.BackgroundTransparency = 1; Page.Visible = default or false; Page.ScrollBarThickness = 0
        local L = Instance.new("UIListLayout", Page); L.Padding = UDim.new(0, 8)
        
        local B = Instance.new("TextButton", TabBar)
        B.Size = UDim2.new(1, 0, 0, 34); B.Text = name; B.BackgroundColor3 = default and Color3.fromRGB(120, 0, 255) or Color3.fromRGB(32, 32, 38)
        B.TextColor3 = Color3.new(1, 1, 1); B.Font = "GothamMedium"; B.TextSize = 11; Instance.new("UICorner", B).CornerRadius = UDim.new(0, 8)
        
        B.MouseButton1Click:Connect(function()
            for _, p in pairs(Pages:GetChildren()) do if p:IsA("ScrollingFrame") then p.Visible = false end end
            for _, b in pairs(TabBar:GetChildren()) do if b:IsA("TextButton") then b.BackgroundColor3 = Color3.fromRGB(32, 32, 38) end end
            Page.Visible = true; B.BackgroundColor3 = Color3.fromRGB(120, 0, 255)
        end)

        -- å›å‚³ç‰©ä»¶å°å‘çš„ Elementsï¼Œå°æ¥ Tab1:AddButton
        local Elements = {}
        
        function Elements:AddButton(text, callback)
            local btn = Instance.new("TextButton", Page)
            btn.Size = UDim2.new(0.96, 0, 0, 38); btn.Text = "  ğŸ± " .. text; btn.BackgroundColor3 = Color3.fromRGB(35, 35, 42); btn.TextColor3 = Color3.new(1, 1, 1); btn.Font = "Gotham"; btn.TextSize = 12; btn.TextXAlignment = "Left"
            Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 8)
            
            btn.MouseButton1Click:Connect(function() callback(btn) end)
            
            -- å‹•æ…‹èª¿æ•´ç•«å¸ƒå¤§å°
            RunService.Heartbeat:Wait()
            Page.CanvasSize = UDim2.new(0, 0, 0, L.AbsoluteContentSize.Y + 10)
            return btn
        end

        function Elements:AddInfo(title, desc)
            local f = Instance.new("Frame", Page); f.Size = UDim2.new(0.96, 0, 0, 58); f.BackgroundColor3 = Color3.fromRGB(28, 28, 34); Instance.new("UICorner", f).CornerRadius = UDim.new(0, 8)
            local t = Instance.new("TextLabel", f); t.Text = title; t.Size = UDim2.new(1, -20, 0, 24); t.BackgroundTransparency = 1; t.TextColor3 = Color3.fromRGB(255, 180, 180); t.Position = UDim2.new(0, 10, 0, 6); t.Font = "GothamBold"; t.TextSize = 12; t.TextXAlignment = "Left"
            local d = Instance.new("TextLabel", f); d.Text = desc; d.Size = UDim2.new(1, -20, 0, 24); d.BackgroundTransparency = 1; d.TextColor3 = Color3.fromRGB(200, 200, 200); d.Position = UDim2.new(0, 10, 0, 28); d.Font = "Gotham"; d.TextSize = 11; d.TextXAlignment = "Left"
            
            RunService.Heartbeat:Wait()
            Page.CanvasSize = UDim2.new(0, 0, 0, L.AbsoluteContentSize.Y + 10)
        end
        
        return Elements
    end
    
    return LibLogic
end

return UI
