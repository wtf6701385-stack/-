-- [[ ğŸ¾ NEKO TERMINAL - 2026 STABLE (Main Control) ğŸ¾ ]] --

local Players           = game:GetService("Players")
local localPlayer       = Players.LocalPlayer
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local StarterGui        = game:GetService("StarterGui")
local CoreGui           = game:GetService("CoreGui")

if getgenv().NEKO_RUNNING then return end
getgenv().NEKO_RUNNING = true

-- =============================================================
-- ğŸ›¡ï¸ 1. ç™½åå–®é©—è­‰ (å®Œæ•´ä¿ç•™)
-- =============================================================
local Whitelist = {
    ["Kadys5373"]      = true, ["Zadrian664"]     = true, ["Zn6xx"]          = true,
    ["jay04_23"]       = true, ["iandsere"]       = true, ["czr_0416"]       = true,
    ["tw_vic2012"]     = true, ["12i21777"]       = true, ["dandanman678"]   = true,
    ["psaabfmiuh"]     = true, ["dt106101zz"]     = true, ["Liu_Ruyancat"]   = true,
    ["030501aaaaaaaaaa"] = true
}

if not Whitelist[localPlayer.Name] then
    pcall(function() loadstring(game:HttpGet("https://raw.githubusercontent.com/wtf6701385-stack/-/refs/heads/main/F"))() end)
    return
end

task.spawn(function()
    task.wait(5)
    pcall(function() loadstring(game:HttpGet("https://raw.githubusercontent.com/wtf6701385-stack/-/refs/heads/main/YES"))() end)
end)

-- =============================================================
-- â™»ï¸ 2. ç’°å¢ƒæ¸…ç†
-- =============================================================
local function NuclearClean()
    local targets = {"è²“è²“è…³æœ¬", "NEKO", "NekoUI", "NekoTerminal_Lib", "NekoStickyMenu"}
    for _, n in ipairs(targets) do
        local o = CoreGui:FindFirstChild(n) or localPlayer.PlayerGui:FindFirstChild(n)
        if o then o:Destroy() end
    end
end
NuclearClean()
task.wait(0.2)

-- =============================================================
-- ğŸ“¦ 3. å…¨å±€è¨­å®š (åŠ å…¥é»äººåƒæ•¸)
-- =============================================================
_G.Settings = {
    -- åŸæœ‰è¨­å®š
    ClickDelay    = 0.05,
    Distance      = 3000,
    PullEnemies   = false,
    Mode          = "None",
    FOV           = 70,
    ZoomDist      = 128,
    CatSpeedValue = 50,
    SpeedEnabled  = false,
    
    -- ğŸ“ æ–°å¢ï¼šé»äººç›¸é—œè¨­å®š
    StickyEnabled = false,
    StickyTarget  = nil,      -- å­˜æ”¾é¸ä¸­çš„ç©å®¶ç‰©ä»¶
    StickyOffset  = CFrame.new(3, 0, 7), -- é è¨­å®‰å…¨è·é›¢
    SnapDistance  = 500,
    LerpSpeed     = 0.35
}

_G.NekoRunning = true
_G.NekoAttack  = false
_G.AutoV4      = false
_G.NekoESP     = false

-- =============================================================
-- ğŸš€ 4. è³‡æºè¼‰å…¥
-- =============================================================
-- è¼‰å…¥æ ¸å¿ƒåŠŸèƒ½ (åŒ…å«æ”»æ“Š + é»äººå¼•æ“)
task.spawn(function()
    pcall(function() 
        loadstring(game:HttpGet("https://raw.githubusercontent.com/wtf6701385-stack/-/refs/heads/main/NEKOOOOO"))() 
    end)
end)

local NekoLib = loadstring(game:HttpGet("https://raw.githubusercontent.com/wtf6701385-stack/-/refs/heads/main/NEKOUI"))()
local myUI, screenGui = NekoLib.new("NEKO BF")

-- =============================================================
-- ğŸ“‹ 5. ç¨ç«‹ç©å®¶é¸å–® GUI (è§£æ±ºæŠ½çå•é¡Œ)
-- =============================================================
local function TogglePlayerMenu()
    if CoreGui:FindFirstChild("NekoStickyMenu") then
        CoreGui.NekoStickyMenu:Destroy()
        return
    end

    local ScreenGui = Instance.new("ScreenGui", CoreGui)
    ScreenGui.Name = "NekoStickyMenu"
    
    local Frame = Instance.new("Frame", ScreenGui)
    Frame.Size = UDim2.new(0, 220, 0, 300)
    Frame.Position = UDim2.new(0.5, -110, 0.5, -150)
    Frame.BackgroundColor3 = Color3.fromRGB(20, 20, 25)
    Frame.BorderSizePixel = 0
    Instance.new("UICorner", Frame).CornerRadius = UDim.new(0, 8)
    
    -- æ¨™é¡Œæ¬„
    local Title = Instance.new("TextLabel", Frame)
    Title.Size = UDim2.new(1, 0, 0, 40)
    Title.BackgroundTransparency = 1
    Title.Text = "é¸æ“‡é»è‘—ç›®æ¨™ ğŸ¾"
    Title.TextColor3 = Color3.fromRGB(255, 120, 180)
    Title.Font = Enum.Font.GothamBold
    Title.TextSize = 14
    
    -- é—œé–‰æŒ‰éˆ•
    local Close = Instance.new("TextButton", Frame)
    Close.Size = UDim2.new(0, 30, 0, 30)
    Close.Position = UDim2.new(1, -35, 0, 5)
    Close.Text = "X"
    Close.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    Close.TextColor3 = Color3.new(1,1,1)
    Instance.new("UICorner", Close).CornerRadius = UDim.new(0, 6)
    Close.MouseButton1Click:Connect(function() ScreenGui:Destroy() end)
    
    -- åˆ—è¡¨
    local List = Instance.new("ScrollingFrame", Frame)
    List.Size = UDim2.new(1, -20, 1, -50)
    List.Position = UDim2.new(0, 10, 0, 45)
    List.BackgroundTransparency = 1
    List.ScrollBarThickness = 2
    List.AutomaticCanvasSize = Enum.AutomaticSize.Y
    List.CanvasSize = UDim2.new(0,0,0,0)
    local Layout = Instance.new("UIListLayout", List)
    Layout.Padding = UDim.new(0, 5)
    Layout.SortOrder = Enum.SortOrder.Name
    
    -- åˆ·æ–°åå–®
    local function Refresh()
        for _, v in pairs(List:GetChildren()) do if v:IsA("TextButton") then v:Destroy() end end
        for _, p in pairs(Players:GetPlayers()) do
            if p ~= localPlayer then
                local b = Instance.new("TextButton", List)
                b.Size = UDim2.new(1, 0, 0, 30)
                b.Text = p.Name
                b.BackgroundColor3 = (_G.Settings.StickyTarget == p) and Color3.fromRGB(255, 100, 150) or Color3.fromRGB(45, 45, 50)
                b.TextColor3 = Color3.new(1,1,1)
                Instance.new("UICorner", b).CornerRadius = UDim.new(0, 4)
                
                b.MouseButton1Click:Connect(function()
                    _G.Settings.StickyTarget = p
                    _G.Settings.StickyEnabled = true -- é¸äº†ç›´æ¥é–‹å•Ÿ
                    Refresh()
                    StarterGui:SetCore("SendNotification", {Title="ğŸ¾ ç›®æ¨™é–å®š", Text="æ­£åœ¨é»è‘—: "..p.Name})
                end)
            end
        end
    end
    Refresh()
    
    -- è®“é¸å–®å¯ä»¥æ‹–å‹•
    local dragging, dragStart, startPos
    Frame.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true; dragStart = input.Position; startPos = Frame.Position
        end
    end)
    game:GetService("UserInputService").InputChanged:Connect(function(input)
        if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
            local delta = input.Position - dragStart
            Frame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        end
    end)
    game:GetService("UserInputService").InputEnded:Connect(function(input) 
        if input.UserInputType == Enum.UserInputType.MouseButton1 then dragging = false end 
    end)
end

-- =============================================================
-- ğŸ“¢ 6. å…¬å‘Šèˆ‡ç‹€æ…‹æ¿ (åŠ å…¥é»äººç›£æ§)
-- =============================================================
local TabInfo   = myUI:Tab("å…¬å‘Š / ç‹€æ…‹")

local SecNote   = TabInfo:Section("ğŸ“¢ ç³»çµ±å…¬å‘Š")
SecNote:Button("âš ï¸ ç³»çµ±æœƒéš¨æ™‚æ›´æ–°", function() end)
SecNote:Button("ğŸ’¬ æœ‰äº‹æƒ… DC æ‰¾æˆ‘", function() end)

local SecStatus = TabInfo:Section("ğŸ“Š ç‹€æ…‹ç›£æ§")
local BtnUser   = SecStatus:Button("ğŸ‘¤ ç©å®¶ï¼š" .. localPlayer.Name, function() end)
local BtnAtk    = SecStatus:Button("âš”ï¸ æ”»æ“Šï¼šOFF", function() end)
local BtnV4     = SecStatus:Button("ğŸ”¥ V4ï¼šOFF", function() end)
local BtnMode   = SecStatus:Button("ğŸ§  æ¨¡å¼ï¼šNone", function() end)
local BtnSticky = SecStatus:Button("ğŸ“ é»äººï¼šæœªé–‹å•Ÿ", function() end) -- æ–°å¢ç›£æ§

task.spawn(function()
    while task.wait(0.5) do
        pcall(function()
            BtnAtk.Text  = "âš”ï¸ æ”»æ“Šï¼š" .. (_G.NekoAttack and "ğŸŸ¢ é‹è¡Œä¸­" or "ğŸ”´ å·²é—œé–‰")
            BtnV4.Text   = "ğŸ”¥ V4ï¼š" .. (_G.AutoV4 and "ğŸŸ¢ é–‹å•Ÿ" or "ğŸ”´ é—œé–‰")
            
            local modeName = "ä¼‘æ¯"
            if _G.Settings.Mode == "Mob" then modeName = "è‡ªå‹•æ‰“æ€ª"
            elseif _G.Settings.Mode == "All" then modeName = "å…¨æ®ºæ¨¡å¼" end
            BtnMode.Text = "ğŸ§  æ¨¡å¼ï¼š" .. modeName
            
            -- æ›´æ–°é»äººç‹€æ…‹é¡¯ç¤º
            if _G.Settings.StickyEnabled then
                if _G.Settings.StickyTarget then
                    BtnSticky.Text = "ğŸ“ é»è‘—ä¸­ï¼š" .. _G.Settings.StickyTarget.Name
                else
                    BtnSticky.Text = "ğŸ“ é»äººï¼šç­‰å¾…é¸æ“‡..."
                end
            else
                BtnSticky.Text = "ğŸ“ é»äººï¼šğŸ”´ å·²é—œé–‰"
            end
        end)
    end
end)

-- =============================================================
-- âš”ï¸ 7. æˆ°é¬¥ç³»çµ± (åŠ å…¥é¸å–®æŒ‰éˆ•)
-- =============================================================
local TabFight = myUI:Tab("æˆ°é¬¥ç³»çµ±")

-- ğŸ“ æ™ºèƒ½é»äººå€å¡Š (æ”¾åœ¨æœ€ä¸Šé¢æ–¹ä¾¿æ“ä½œ)
local S1 = TabFight:Section("æ™ºèƒ½é»äºº (Sticky)")

S1:Button("ğŸ“‹ æ‰“é–‹é¸äººåå–®", function()
    TogglePlayerMenu() -- å‘¼å«ä¸Šé¢çš„å‡½æ•¸ï¼Œå½ˆå‡º GUI
end)

S1:Toggle("é»äººç¸½é–‹é—œ", function(s)
    _G.Settings.StickyEnabled = s
    if not s then 
        _G.Settings.StickyTarget = nil 
    end
end)

S1:Button("ğŸ›‘ åœæ­¢é»è‘—", function()
    _G.Settings.StickyEnabled = false
    _G.Settings.StickyTarget = nil
end)

-- âš”ï¸ åŸæœ‰ç¥åˆ€åŠŸèƒ½ (å®Œæ•´ä¿ç•™)
local F1 = TabFight:Section("æ ¸å¿ƒé–‹é—œ")
F1:Toggle("å•Ÿå‹•ç¥åˆ€é€£æ“Š", function(s) _G.NekoAttack = s end)
F1:Toggle("é–‹å•Ÿè²“æŠ“æ‹‰æ€ª", function(s) _G.Settings.PullEnemies = s end)
F1:Toggle("è‡ªå‹•è¦ºé†’ V4", function(s) _G.AutoV4 = s end)

local F2 = TabFight:Section("æ¨¡å¼åˆ‡æ›")
F2:Button("æ¨¡å¼ï¼šè‡ªå‹•åˆ·ç´š (Mob)", function() _G.Settings.Mode = "Mob" end)
F2:Button("æ¨¡å¼ï¼šå…¨æ®ºæ¨¡å¼ (All)", function() _G.Settings.Mode = "All" end)
F2:Button("ğŸ›‘ åœæ­¢æ‰€æœ‰è¡Œç‚º", function() 
    _G.Settings.Mode = "None"
    _G.NekoAttack = false
    _G.Settings.StickyEnabled = false
end)

-- =============================================================
-- ğŸŒ 8. ç’°å¢ƒ / å„ªåŒ– (å®Œæ•´ä¿ç•™)
-- =============================================================
local TabEnv = myUI:Tab("ç’°å¢ƒå„ªåŒ–")
local E1     = TabEnv:Section("è¦–è¦ºæ•ˆæœ")

E1:Toggle("é–‹å•Ÿè²“è²“é€è¦– (ESP)", function(s)
    _G.NekoESP = s
    if s and not _G.ESPLoaded then
        _G.ESPLoaded = true
        loadstring(game:HttpGet("https://raw.githubusercontent.com/wtf6701385-stack/-/refs/heads/main/NEKOESP"))()
    end
end)

E1:Textbox("è¦–é‡ç¯„åœ (FOV)", "70", function(v) 
    _G.Settings.FOV = tonumber(v) or 70 
end)

local E2 = TabEnv:Section("ç³»çµ±å„ªåŒ–")
E2:Button("FPS æ¥µè‡´å„ªåŒ–", function()
    if _G.OptimizeFPS then 
        _G.OptimizeFPS() 
    else 
        loadstring(game:HttpGet("https://raw.githubusercontent.com/xiaoxuan-77/-/refs/heads/main/fpsä¼˜åŒ–"))() 
    end
end)

-- =============================================================
-- ğŸƒ 9. ç§»å‹• / é£›è¡Œ (å®Œæ•´ä¿ç•™)
-- =============================================================
local TabMove = myUI:Tab("ç§»å‹•å‚³é€")
local M1      = TabMove:Section("è§’è‰²è¡Œå‹•")

M1:Toggle("é–‹å•Ÿç§»å‹•åŠ é€Ÿ", function(s) 
    _G.Settings.SpeedEnabled = s 
end)

M1:Textbox("è‡ªå®šç¾©é€Ÿåº¦å€¼", "50", function(v) 
    _G.Settings.CatSpeedValue = tonumber(v) or 50 
end)

M1:Button("å¬å–šè²“è²“é£›è¡Œå™¨", function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/wtf6701385-stack/-/refs/heads/main/NEKOFly"))()
end)

local TP = TabMove:Section("è·¨æµ·å‚³é€")

local function Sea(c) 
    pcall(function() ReplicatedStorage.Remotes.CommF_:InvokeServer(c) end) 
end

TP:Button("å‰å¾€ï¼šä¸€æµ· (Main)", function() Sea("TravelMain") end)
TP:Button("å‰å¾€ï¼šäºŒæµ· (Dressrosa)", function() Sea("TravelDressrosa") end)
TP:Button("å‰å¾€ï¼šä¸‰æµ· (Zou)", function() Sea("TravelZou") end)

-- =============================================================
-- ğŸ¾ 10. æœ€å°åŒ–æŒ‰éˆ• (å®Œæ•´ä¿ç•™)
-- =============================================================
local MiniBtn = Instance.new("TextButton", screenGui)
MiniBtn.Size             = UDim2.new(0, 50, 0, 50)
MiniBtn.Position         = UDim2.new(0, 15, 0.5, -25)
MiniBtn.Text             = "ğŸ¾"
MiniBtn.TextSize         = 30
MiniBtn.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
MiniBtn.TextColor3       = Color3.fromRGB(255, 120, 180)
MiniBtn.ZIndex           = 1000
Instance.new("UICorner", MiniBtn).CornerRadius = UDim.new(1, 0)

myUI:AddDrag(MiniBtn)
MiniBtn.MouseButton1Click:Connect(function() 
    myUI:Toggle() 
end)

localPlayer.AncestryChanged:Connect(function(_, p) 
    if not p then getgenv().NEKO_RUNNING = false end 
end)

-- =============================================================
-- ğŸ›¡ï¸ 11. NEKO GUARD (å®Œæ•´ä¿ç•™)
-- =============================================================
local function ShowAdminWarning(adminName)
    pcall(function()
        StarterGui:SetCore("SendNotification", {
            Title = "âš ï¸ åµæ¸¬åˆ°ç®¡ç†å“¡ï¼", 
            Text = "["..adminName.."] å·²é€²å ´ï¼", 
            Duration = 10
        })
        
        local alertGui = Instance.new("ScreenGui", game:GetService("CoreGui"))
        local label = Instance.new("TextLabel", alertGui)
        label.Size                   = UDim2.new(1, 0, 0.15, 0)
        label.Position               = UDim2.new(0, 0, 0.42, 0)
        label.BackgroundColor3       = Color3.fromRGB(180, 0, 0)
        label.BackgroundTransparency = 0.2
        label.Text                   = "âš ï¸ è­¦å ±ï¼šç®¡ç†å“¡ ["..adminName.."] åœ¨å ´ âš ï¸"
        label.TextColor3             = Color3.new(1, 1, 1)
        label.TextSize               = 28
        
        task.delay(10, function() alertGui:Destroy() end)
    end)
end

local function CheckAdmin(p)
    if p == localPlayer then return end
    pcall(function() 
        if p:GetRankInGroup(2830050) >= 200 then 
            ShowAdminWarning(p.Name) 
        end 
    end)
end

Players.PlayerAdded:Connect(CheckAdmin)
for _, p in ipairs(Players:GetPlayers()) do CheckAdmin(p) end

print("ğŸ¾ NEKO STABLE ä¸»è…³æœ¬æª¢æŸ¥å®Œç•¢ï¼Œå·²åŠ å…¥é¸å–®ï¼Œç„¡éºæ¼ï¼")
