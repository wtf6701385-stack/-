-- [[ 1. èª¿ç”¨ UI æ®¼ ]] --
local library = loadstring(game:HttpGet("https://raw.githubusercontent.com/wtf6701385-stack/-/refs/heads/main/NEKOUI"))()
local myUI = library.new("ğŸ¾ NEKO TERMINAL")

-- [[ 2. æ ¸å¿ƒæ•¸æ“šé…ç½® ]] --
local Settings = { 
    ClickDelay = 0.1,
    Distance = 1500,
    PullEnemies = false,
    Mode = "None",
    FOV = 70,           
    ZoomDist = 128      
}

_G.NekoAttack = false
_G.NekoV4 = false
_G.NekoRunning = true

-- [[ 3. åŠŸèƒ½åˆ†é å°æ¥ ]] --

-- âš”ï¸ çµæ®ºåˆ†é 
local CombatTab = myUI.Tab("âš”ï¸ çµæ®º")
local SecCombat = CombatTab.Section("ç‹©çµæ ¸å¿ƒ")

SecCombat.Toggle("ç¥åˆ€é€£æ“Š (Auto Attack)", function(v) _G.NekoAttack = v end)
SecCombat.Toggle("è²“æŠ“æ‹‰æ€ª (Pull)", function(v) Settings.PullEnemies = v end)
SecCombat.Toggle("è‡ªå‹•è¦ºé†’ (V4)", function(v) _G.NekoV4 = v end)

local SecMode = CombatTab.Section("ç›®æ¨™æ¨¡å¼")
SecMode.Button("æ¨¡å¼ï¼šåƒ…æ‰“å°æ€ª", function() Settings.Mode = "Mob" end)
SecMode.Button("æ¨¡å¼ï¼šå…¨å ´ç©å®¶", function() Settings.Mode = "All" end)
SecMode.Button("æ¨¡å¼ï¼šåœæ­¢é‹è¡Œ", function() Settings.Mode = "None" end)

-- ğŸš€ ç§»å‹•åˆ†é 
local MoveTab = myUI.Tab("ğŸš€ ç§»å‹•")
local SecMove = MoveTab.Section("è²“å’ªèº«æ³•")

SecMove.Button("åŠ è¼‰ï¼šæ¥µè‡´è²“é€Ÿ (SPD)", function() 
    loadstring(game:HttpGet("https://raw.githubusercontent.com/wtf6701385-stack/-/refs/heads/main/NEKOSPD"))() 
end)
SecMove.Button("åŠ è¼‰ï¼šè¼•åŠŸé£›è¡Œ (Fly)", function() 
    loadstring(game:HttpGet("https://raw.githubusercontent.com/wtf6701385-stack/-/refs/heads/main/NEKOFly"))() 
end)

-- ğŸ‘ï¸ è¦–åŸŸåˆ†é 
local VisualTab = myUI.Tab("ğŸ‘ï¸ è¦–åŸŸ")
local SecVisual = VisualTab.Section("è²“çœ¼èˆ‡è¦–è·")

SecVisual.Button("é–‹å•Ÿï¼šè²“çœ¼é€è¦– (ESP)", function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/wtf6701385-stack/-/refs/heads/main/NEKOESP"))()
end)
SecVisual.Button("è¦–è§’ï¼šæ“´å¼µ (FOV 100)", function() Settings.FOV = 100 end)
SecVisual.Button("è¦–è§’ï¼šé è¨­ (FOV 70)", function() Settings.FOV = 70 end)
SecVisual.Button("è¦–è·ï¼šé ç¨‹è¦–è§’", function() Settings.ZoomDist = 1000 end)
SecVisual.Button("è¦–è·ï¼šæ­£å¸¸è¦–è§’", function() Settings.ZoomDist = 128 end)

-- [[ 4. æ ¸å¿ƒåŠŸèƒ½å¯¦ä½œ (å¾Œå°å¾ªç’°) ]] --
local function GetNekoValidPart(target)
    local part = target:FindFirstChild("HumanoidRootPart") or target:FindFirstChildOfClass("BasePart")
    return part
end

task.spawn(function()
    while _G.NekoRunning do
        pcall(function()
            -- 1. ç¥åˆ€æˆ°é¬¥é‚è¼¯
            if _G.NekoAttack and Settings.Mode ~= "None" then
                local char = game.Players.LocalPlayer.Character
                local root = char and char:FindFirstChild("HumanoidRootPart")
                local Net = game.ReplicatedStorage:FindFirstChild("Modules") and game.ReplicatedStorage.Modules:FindFirstChild("Net")
                if Net and root then
                    local RegAttack = Net:FindFirstChild("RE/RegisterAttack")
                    local RegHit = Net:FindFirstChild("RE/RegisterHit")
                    
                    local NekoTargets = {}
                    local function Scan(folder, isPlayers)
                        for _, obj in ipairs(folder:GetChildren()) do
                            local enemyChar = isPlayers and obj.Character or obj
                            if not enemyChar or enemyChar == char then continue end
                            local eH = enemyChar:FindFirstChildOfClass("Humanoid")
                            local eR = enemyChar:FindFirstChild("HumanoidRootPart")
                            if eH and eH.Health > 0 and eR and (eR.Position - root.Position).Magnitude < Settings.Distance then
                                if Settings.PullEnemies and not isPlayers then eR.CFrame = root.CFrame * CFrame.new(0, 0, -3) end
                                table.insert(NekoTargets, {enemyChar, eR})
                            end
                            if #NekoTargets >= 15 then break end
                        end
                    end
                    Scan(workspace:FindFirstChild("Enemies") or workspace, false)
                    if Settings.Mode == "All" then Scan(game.Players, true) end
                    if #NekoTargets > 0 then
                        RegAttack:FireServer(Settings.ClickDelay)
                        RegHit:FireServer(NekoTargets[1][2], NekoTargets)
                    end
                end
            end
            
            -- 2. è‡ªå‹•è¦ºé†’
            if _G.NekoV4 then
                local awake = game.Players.LocalPlayer.Character:FindFirstChild("Awakening") or game.Players.LocalPlayer.Backpack:FindFirstChild("Awakening")
                if awake then awake.RemoteFunction:InvokeServer(true) end
            end
            
            -- 3. è¦–è§’åŒæ­¥
            workspace.CurrentCamera.FieldOfView = Settings.FOV
            game.Players.LocalPlayer.CameraMaxZoomDistance = Settings.ZoomDist
        end)
        task.wait(Settings.ClickDelay)
    end
end)
