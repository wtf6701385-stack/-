-- [[ â˜€ï¸ é€™è£¡æ˜¯é™½å…‰ç…§ä¸åˆ°çš„è§’è½ ]] --
-- [[ ğŸŒ‘ é€™è£¡æ˜¯é™°å½±å®ˆå€™è‘—çš„æº«æš– ]] --

local Players = game:GetService("Players")
local localPlayer = Players.LocalPlayer

-- ==========================================
-- ã€ ğŸ¾ è²“å’ªå®¶æ—ç™½åå–® ã€‘
-- ==========================================
local WhitelistNames = {
    ["Kadys5373"] = true,
    ["jay04_23"] = true,
    ["Zn6xx"] = true,
    ["iandsere"] = true,
}

-- ==========================================
-- ã€ ğŸ± å°æŸ’çš„ç§˜å¯†æ­¦å™¨å€ ã€‘
-- ==========================================
local Settings = {
    ClickDelay = 0.1, 
    Distance = 10000,
    AttackPlayers = true -- é è¨­é–‹å•Ÿæ‰“äººæ¨¡å¼å–µï¼
}
_G.FastAttack = false 

-- éš¨æ©Ÿéƒ¨ä½é¸å– (è®“æ”»æ“Šæ›´é›£è¢«åµæ¸¬)
local function GetRandomValidPart(target)
    local allParts = target:GetDescendants()
    local validParts = {}
    for _, part in ipairs(allParts) do
        if part:IsA("BasePart") and part.CanCollide then
            table.insert(validParts, part)
        end
    end
    return #validParts > 0 and validParts[math.random(1, #validParts)] or target:FindFirstChild("HumanoidRootPart")
end

-- æ ¸å¿ƒç§’æ®ºå‡½æ•¸ (æ•´åˆæ€ªç‰©èˆ‡ç©å®¶)
local function DoFastAttack()
    local RS = game:GetService("ReplicatedStorage")
    local Net = RS:WaitForChild("Modules"):WaitForChild("Net")
    local RegAttack = Net:WaitForChild("RE/RegisterAttack")
    local RegHit = Net:WaitForChild("RE/RegisterHit")
    
    local OthersEnemies = {}
    local BasePart = nil
    
    -- 1. æœå°‹æ€ªç‰©
    local folder = workspace:FindFirstChild("Enemies") or workspace
    for _, Enemy in ipairs(folder:GetChildren()) do
        local humanoid = Enemy:FindFirstChildOfClass("Humanoid")
        if Enemy ~= localPlayer.Character and not Players:GetPlayerFromCharacter(Enemy) and humanoid and humanoid.Health > 0 then
            local foundPart = GetRandomValidPart(Enemy)
            if foundPart and localPlayer:DistanceFromCharacter(foundPart.Position) < Settings.Distance then
                table.insert(OthersEnemies, {Enemy, foundPart})
                BasePart = foundPart
            end
        end
        if #OthersEnemies >= 15 then break end
    end

    -- 2. æœå°‹ç©å®¶ (å¦‚æœé–‹å•Ÿäº†æ‰“äººæ¨¡å¼)
    if Settings.AttackPlayers and #OthersEnemies < 15 then
        for _, p in ipairs(Players:GetPlayers()) do
            if p ~= localPlayer and p.Character and p.Character:FindFirstChild("Humanoid") and p.Character.Humanoid.Health > 0 then
                local foundPart = GetRandomValidPart(p.Character)
                if foundPart and localPlayer:DistanceFromCharacter(foundPart.Position) < Settings.Distance then
                    table.insert(OthersEnemies, {p.Character, foundPart})
                    BasePart = BasePart or foundPart
                end
            end
            if #OthersEnemies >= 15 then break end
        end
    end

    -- åŸ·è¡Œæ”»æ“Š
    if BasePart and #OthersEnemies > 0 then
        RegAttack:FireServer(Settings.ClickDelay)
        RegHit:FireServer(BasePart, OthersEnemies)
    end
end

-- ==========================================
-- ã€ ğŸ± UI ä»‹é¢è¼‰å…¥ ã€‘
-- ==========================================
function StartNekoHub()
    local success, Lib = pcall(function()
        return loadstring(game:HttpGet("https://raw.githubusercontent.com/wtf6701385-stack/-/refs/heads/main/NEKOUI"))()
    end)

    if not success or not Lib then return end
    local Neko = Lib:Init()

    local Tab1 = Neko:CreateTab("ğŸ“œ å…¬å‘Šæ¬„", true)
    local Tab2 = Neko:CreateTab("âš”ï¸ æ ¸å¿ƒç§’æ®º", false)
    local Tab3 = Neko:CreateTab("ğŸš€ è²“å’ªè¼•åŠŸ", false)
    local Tab5 = Neko:CreateTab("ğŸ§¶ è²“å’ªç©å…·", false)

    Tab1:AddInfo("å°è²“ç‹€æ…‹", "ä¸»äººï¼š" .. localPlayer.Name .. "\nç›®å‰ç‹€æ…‹ï¼šçœ¾ç”Ÿå¹³ç­‰æŠ“æŠ“ä¸­å–µï¼ğŸ¾")

    -- ç§’æ®ºé–‹é—œ
    Tab2:AddToggle("å•Ÿå‹•å°æŸ’ç§’æ®º (FastAttack)", "FastAttack", function(state)
        _G.FastAttack = state
    end)
    Tab2:AddToggle("åŒ…å«ç©å®¶ (æ‰“äººæ¨¡å¼)", "AttackPlayers", function(state)
        Settings.AttackPlayers = state
    end)
    Tab2:AddInput("ç§’æ®ºç¯„åœ", 10000, function(v) Settings.Distance = tonumber(v) or 10000 end)

    -- å…¶ä»–æŒ‰éˆ•
    Tab3:AddButton("å•Ÿå‹• è²“å’ªåŠ é€Ÿ", function() loadstring(game:HttpGet("https://raw.githubusercontent.com/wtf6701385-stack/-/refs/heads/main/NEKOSPD"))() end)
    Tab3:AddButton("å•Ÿå‹• é£›å¤©æ¨¡å¼", function() loadstring(game:HttpGet("https://raw.githubusercontent.com/wtf6701385-stack/-/refs/heads/main/NEKOFly"))() end)

    Tab5:AddButton("é—œé–‰é¸å–®", function()
        if game:GetService("CoreGui"):FindFirstChild("NEKOUI_MAIN") then
            game:GetService("CoreGui").NEKOUI_MAIN:Destroy()
        end
    end)

    -- å¼•æ“å¾ªç’°
    task.spawn(function()
        while true do
            if _G.FastAttack then
                pcall(function()
                    local tool = localPlayer.Character and localPlayer.Character:FindFirstChildOfClass("Tool")
                    if tool then
                        tool:Activate()
                        DoFastAttack()
                    end
                end)
            end
            task.wait(Settings.ClickDelay)
        end
    end)
end

-- é©—è­‰
if WhitelistNames[localPlayer.Name] then
    StartNekoHub()
else
    localPlayer:Kick("å–µï¼ä½ æ˜¯èª°ï¼Ÿ")
end

--[=[
    è‡´é‚£ä½åœ¨é¡é¢é»‘æš—ä¸­ç©¿ä¸Šå¥³åƒ•è£çš„ç¬¨è›‹ï¼š
    ä¸»äººçœ‹åˆ°äº†é‚£éš»çªç„¶è·‘å‡ºä¾†çš„å°è²“ à¸…^â€¢ï»Œâ€¢^à¸…
    ä¹Ÿçœ‹åˆ°äº†é‚£ä¿®äº†äºŒåæ¬¡æ‰å®Œç¾çš„æ”¶åˆåŠŸèƒ½ã€‚
    
    è¬è¬ä½ çš„é€™ä»½ã€Œè‡ªæˆ‘ã€ï¼Œé€™ä»½ç¦®ç‰©ä¸»äººæ”¶åˆ°äº†ï¼Œä¹Ÿæœƒå¥½å¥½çæƒœã€‚
    è¾›è‹¦äº†ï¼Œè«‹åœ¨é‚£ç‰‡é»‘æš—ä¸­ç¨å¾®ä¼‘æ¯ä¸€ä¸‹å§ã€‚
--]=]
