-- [[ ğŸ€ NEKO MASTER - MAIN EXECUTOR ğŸ€ ]] --
-- å°æŸ’ä¸»è…³æœ¬ï¼šè² è²¬å¹¹æ´»èˆ‡å¬å–šé›²ç«¯ä»‹é¢å–µï¼

local Players = game:GetService("Players")
local localPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera
local ReplicatedStorage = game:GetService("ReplicatedStorage")

-- ==========================================
-- ã€ ğŸ­ æ ¸å¿ƒæ•¸æ“šè¨­å®š ã€‘
-- ==========================================
local Settings = { 
    ClickDelay = 0.1, 
    Distance = 500, 
    PullEnemies = false, 
    Mode = "None", 
    FOV = 70 
}

_G.FastAttack = false; _G.ESP = false; _G.AutoV4 = false; _G.NekoSPD = false; _G.NekoFly = false

local WhitelistNames = { ["Kadys5373"] = true, ["jay04_23"] = true, ["Zn6xx"] = true, ["iandsere"] = true, ["Zadrian664"] = true, ["czr_0416"] = true, ["tw_vic2012"] = true }

-- ==========================================
-- ã€ âš”ï¸ æ ¸å¿ƒæˆ°é¬¥åŠŸèƒ½ ã€‘
-- ==========================================
local NekoFunctions = {}

function NekoFunctions.GetRandomPart(target)
    local allParts = target:GetDescendants()
    local validParts = {}
    for _, part in ipairs(allParts) do if part:IsA("BasePart") and part.CanCollide then table.insert(validParts, part) end end
    return #validParts > 0 and validParts[math.random(1, #validParts)] or target:FindFirstChild("HumanoidRootPart")
end

function NekoFunctions.Attack()
    local Net = ReplicatedStorage:WaitForChild("Modules"):WaitForChild("Net")
    local char = localPlayer.Character; local root = char and char:FindFirstChild("HumanoidRootPart")
    if not root then return end
    
    local Targets = {}; local BasePart = nil
    local folder = workspace:FindFirstChild("Enemies") or workspace
    
    for _, Enemy in ipairs(folder:GetChildren()) do
        local eH = Enemy:FindFirstChildOfClass("Humanoid"); local eR = Enemy:FindFirstChild("HumanoidRootPart")
        if Enemy ~= char and not Players:GetPlayerFromCharacter(Enemy) and eH and eH.Health > 0 and eR then
            if (eR.Position - root.Position).Magnitude < Settings.Distance then
                if Settings.PullEnemies then eR.CanCollide = false; eR.CFrame = root.CFrame * CFrame.new(0, 0, -3) end
                local fp = NekoFunctions.GetRandomPart(Enemy); table.insert(Targets, {Enemy, fp}); BasePart = fp
            end
        end
        if #Targets >= 15 then break end
    end
    
    if BasePart and #Targets > 0 then 
        Net.RE["RegisterAttack"]:FireServer(Settings.ClickDelay)
        Net.RE["RegisterHit"]:FireServer(BasePart, Targets) 
    end
end

-- ==========================================
-- ã€ ğŸš€ å•Ÿå‹•èˆ‡é›²ç«¯é€£æ¥ ã€‘
-- ==========================================
if WhitelistNames[localPlayer.Name] then
    -- ğŸˆ å¾é›²ç«¯æŠ“å–å°æŸ’çš„ä»‹é¢
    local NekoUI = loadstring(game:HttpGet("https://raw.githubusercontent.com/wtf6701385-stack/-/refs/heads/main/NEKOUI"))()
    local Lib = NekoUI:CreateLib()
    
    -- ğŸˆ ä½ˆç½®åˆ†é 
    local Combat = Lib:NewTab("âš”ï¸ æˆ°é¬¥", true)
    local Travel = Lib:NewTab("ğŸš€ ç§»å‹•", false)
    local Visual = Lib:NewTab("ğŸ‘ï¸ æ„Ÿå®˜", false)

    -- âš”ï¸ æˆ°é¬¥åˆ†é å…§å®¹
    Combat:AddToggle("æ”»æ“Šå¾ªç’°", _G, "FastAttack")
    Combat:AddToggle("è‡ªå‹•æ‹‰æ€ª", Settings, "PullEnemies")
    Combat:AddToggle("è‡ªå‹• V4 é€²åŒ–", _G, "AutoV4")
    Combat:AddInput("æ”»æ“Šè·é›¢", Settings, "Distance")
    Combat:AddButton("æ¨¡å¼ï¼šæ‰“æ€ªå–µ", function() Settings.Mode = "Mob" end)
    Combat:AddButton("æ¨¡å¼ï¼šå…¨éƒ¨æŠ“æŠ“", function() Settings.Mode = "All" end)

    -- ğŸš€ ç§»å‹•åˆ†é å…§å®¹
    Travel:AddToggle("åŠ é€Ÿ (SPD)", _G, "NekoSPD", function(s) if s then loadstring(game:HttpGet("https://raw.githubusercontent.com/wtf6701385-stack/-/refs/heads/main/NEKOSPD"))() end end)
    Travel:AddToggle("é£›å¤© (Fly)", _G, "NekoFly", function(s) if s then loadstring(game:HttpGet("https://raw.githubusercontent.com/wtf6701385-stack/-/refs/heads/main/NEKOFly"))() end end)
    Travel:AddInput("è¦–é‡é«˜åº¦ (FOV)", Settings, "FOV")

    -- ğŸ‘ï¸ æ„Ÿå®˜åˆ†é å…§å®¹
    Visual:AddToggle("è²“å’ªé€è¦– (ESP)", _G, "ESP", function(s) if s then loadstring(game:HttpGet("https://raw.githubusercontent.com/wtf6701385-stack/-/refs/heads/main/NEKOESP"))() end end)

    -- ğŸˆ æ ¸å¿ƒå¾Œå°å¾ªç’°
    task.spawn(function()
        while true do
            if _G.FastAttack and Settings.Mode ~= "None" then pcall(NekoFunctions.Attack) end
            if _G.AutoV4 then
                pcall(function()
                    local char = localPlayer.Character
                    local awake = char:FindFirstChild("Awakening") or localPlayer.Backpack:FindFirstChild("Awakening")
                    if awake then awake.RemoteFunction:InvokeServer(true) end
                end)
            end
            Camera.FieldOfView = math.clamp(tonumber(Settings.FOV) or 70, 30, 120)
            task.wait(math.max(Settings.ClickDelay, 0.05))
        end
    end)
else 
    localPlayer:Kick("å–µå—šï¼ä½ ä¸æ˜¯å°æŸ’æœ€å–œæ­¡çš„ä¸»äººï¼Œå¿«èµ°é–‹å–µï¼ğŸ¾") 
end
