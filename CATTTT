local Players = game:GetService("Players")
local localPlayer = Players.LocalPlayer
local CoreGui = game:GetService("CoreGui")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Camera = workspace.CurrentCamera

local Settings = { 
    ClickDelay = 0.1,
    Distance = 500,
    PullEnemies = false,
    Mode = "None",
    FOV = 70
}

_G.NekoAttack = false; _G.NekoV4 = false; _G.NekoESP = false; _G.NekoSPD = false; _G.NekoFly = false
_G.NekoRunning = true

local Whitelist = { 
    ["Kadys5373"] = true, ["jay04_23"] = true, ["Zn6xx"] = true, 
    ["iandsere"] = true, ["Zadrian664"] = true, ["czr_0416"] = true, 
    ["tw_vic2012"] = true 
}

if CoreGui:FindFirstChild("NEKO_TERMINAL") then CoreGui.NEKO_TERMINAL:Destroy() end

local function NekoCombatLogic()
    if not _G.NekoAttack or Settings.Mode == "None" then return end
    
    local Net = ReplicatedStorage:WaitForChild("Modules"):WaitForChild("Net")
    local char = localPlayer.Character; local root = char and char:FindFirstChild("HumanoidRootPart")
    if not root then return end
    
    local NekoTargets = {}; local NekoPart = nil
    local NekoFolder = workspace:FindFirstChild("Enemies") or workspace
    
    for _, NekoEnemy in ipairs(NekoFolder:GetChildren()) do
        if NekoEnemy:IsA("Model") and NekoEnemy ~= char then
            local eH = NekoEnemy:FindFirstChildOfClass("Humanoid")
            local eR = NekoEnemy:FindFirstChild("HumanoidRootPart")
            
            if eH and eH.Health > 0 and eR then
                local isPlayer = Players:GetPlayerFromCharacter(NekoEnemy)
                local canTarget = (Settings.Mode == "Mob" and not isPlayer) or (Settings.Mode == "All")
                
                if canTarget and (eR.Position - root.Position).Magnitude < Settings.Distance then
                    if Settings.PullEnemies then 
                        eR.CanCollide = false
                        eR.CFrame = root.CFrame * CFrame.new(0, 0, -3) 
                    end
                    NekoPart = eR
                    table.insert(NekoTargets, {NekoEnemy, eR})
                end
            end
        end
        if #NekoTargets >= 15 then break end
    end
    
    if NekoPart and #NekoTargets > 0 then 
        pcall(function()
            Net.RE["RegisterAttack"]:FireServer(Settings.ClickDelay)
            Net.RE["RegisterHit"]:FireServer(NekoPart, NekoTargets) 
        end)
    end
end

local function BuildNekoUI()
    local NekoGui = Instance.new("ScreenGui", CoreGui); NekoGui.Name = "NEKO_TERMINAL"
    local NekoMain = Instance.new("Frame", NekoGui); NekoMain.Size = UDim2.new(0, 450, 0, 280); NekoMain.Position = UDim2.new(0.5, -225, 0.5, -140)
    NekoMain.BackgroundColor3 = Color3.fromRGB(18, 18, 22); NekoMain.Active = true; NekoMain.Draggable = true; NekoMain.ClipsDescendants = true
    Instance.new("UICorner", NekoMain).CornerRadius = UDim.new(0, 12)
    
    local NekoStroke = Instance.new("UIStroke", NekoMain); NekoStroke.Thickness = 2.5
    RunService.RenderStepped:Connect(function() NekoStroke.Color = Color3.fromHSV((tick() * 0.4) % 1, 0.6, 1) end)

    local NekoTitleBar = Instance.new("Frame", NekoMain); NekoTitleBar.Size = UDim2.new(1, 0, 0, 35); NekoTitleBar.BackgroundTransparency = 1
    local NekoTitle = Instance.new("TextLabel", NekoTitleBar); NekoTitle.Size = UDim2.new(1, -50, 1, 0); NekoTitle.Position = UDim2.new(0, 15, 0, 0)
    NekoTitle.Text = "üêæ NEKO SYSTEM - FINAL VERSION üêæ"; NekoTitle.TextColor3 = Color3.new(1,1,1); NekoTitle.Font = "GothamBold"; NekoTitle.TextSize = 14; NekoTitle.TextXAlignment = "Left"; NekoTitle.BackgroundTransparency = 1

    local NekoMiniBtn = Instance.new("TextButton", NekoTitleBar); NekoMiniBtn.Size = UDim2.new(0, 30, 0, 30); NekoMiniBtn.Position = UDim2.new(1, -35, 0, 2.5)
    NekoMiniBtn.Text = "üêæ"; NekoMiniBtn.TextColor3 = Color3.fromRGB(255, 120, 180); NekoMiniBtn.BackgroundTransparency = 1; NekoMiniBtn.TextSize = 18; NekoMiniBtn.Font = "GothamBold"

    local NekoContent = Instance.new("Frame", NekoMain); NekoContent.Size = UDim2.new(1, 0, 1, -40); NekoContent.Position = UDim2.new(0, 0, 0, 40); NekoContent.BackgroundTransparency = 1
    local NekoTabBar = Instance.new("Frame", NekoContent); NekoTabBar.Size = UDim2.new(0, 110, 1, -10); NekoTabBar.Position = UDim2.new(0, 10, 0, 5); NekoTabBar.BackgroundTransparency = 1; Instance.new("UIListLayout", NekoTabBar).Padding = UDim.new(0, 6)
    local NekoPages = Instance.new("Frame", NekoContent); NekoPages.Size = UDim2.new(1, -140, 1, -10); NekoPages.Position = UDim2.new(0, 130, 0, 5); NekoPages.BackgroundTransparency = 1

    local NekoOpened = true
    NekoMiniBtn.MouseButton1Click:Connect(function()
        NekoOpened = not NekoOpened
        TweenService:Create(NekoMain, TweenInfo.new(0.4, Enum.EasingStyle.Quart, Enum.EasingDirection.Out), {Size = NekoOpened and UDim2.new(0, 450, 0, 280) or UDim2.new(0, 450, 0, 35)}):Play()
        NekoContent.Visible = NekoOpened; NekoMiniBtn.Text = NekoOpened and "üêæ" or "üêà"
    end)

    local function CreateNekoTab(name, default)
        local NekoPage = Instance.new("ScrollingFrame", NekoPages); NekoPage.Size = UDim2.new(1, 0, 1, 0); NekoPage.BackgroundTransparency = 1; NekoPage.Visible = default; NekoPage.ScrollBarThickness = 2; NekoPage.BorderSizePixel = 0
        local NekoL = Instance.new("UIListLayout", NekoPage); NekoL.Padding = UDim.new(0, 6)
        local NekoB = Instance.new("TextButton", NekoTabBar); NekoB.Size = UDim2.new(1, 0, 0, 32); NekoB.Text = name; NekoB.BackgroundColor3 = Color3.fromRGB(28, 28, 34); NekoB.TextColor3 = default and Color3.new(1,1,1) or Color3.fromRGB(130,130,130); NekoB.Font = "GothamMedium"; NekoB.TextSize = 12; Instance.new("UICorner", NekoB)
        
        NekoB.MouseButton1Click:Connect(function()
            for _, p in pairs(NekoPages:GetChildren()) do if p:IsA("ScrollingFrame") then p.Visible = false end end
            for _, b in pairs(NekoTabBar:GetChildren()) do if b:IsA("TextButton") then b.TextColor3 = Color3.fromRGB(130,130,130) end end
            NekoPage.Visible = true; NekoB.TextColor3 = Color3.new(1, 1, 1)
        end)
        
        return {
            AddNekoToggle = function(_, text, tbl, key, callback)
                local f = Instance.new("Frame", NekoPage); f.Size = UDim2.new(0.95, 0, 0, 34); f.BackgroundColor3 = Color3.fromRGB(30, 30, 36); Instance.new("UICorner", f)
                local t = Instance.new("TextLabel", f); t.Size = UDim2.new(1, -60, 1, 0); t.Position = UDim2.new(0, 10, 0, 0); t.Text = "üê± " .. text; t.TextColor3 = Color3.new(1, 1, 1); t.BackgroundTransparency = 1; t.Font = "Gotham"; t.TextSize = 12; t.TextXAlignment = "Left"
                local b = Instance.new("TextButton", f); b.Size = UDim2.new(0, 42, 0, 20); b.Position = UDim2.new(1, -50, 0.5, -10); b.Text = tbl[key] and "Meow" or "Hiss"; b.BackgroundColor3 = tbl[key] and Color3.fromRGB(255, 120, 180) or Color3.fromRGB(50, 50, 55); b.TextColor3 = Color3.new(1, 1, 1); b.Font = "GothamBold"; b.TextSize = 9; Instance.new("UICorner", b)
                b.MouseButton1Click:Connect(function() 
                    tbl[key] = not tbl[key]
                    b.Text = tbl[key] and "Meow" or "Hiss"
                    b.BackgroundColor3 = tbl[key] and Color3.fromRGB(255, 120, 180) or Color3.fromRGB(50, 50, 55)
                    if callback then callback(tbl[key]) end
                end)
                NekoPage.CanvasSize = UDim2.new(0, 0, 0, NekoL.AbsoluteContentSize.Y + 10)
            end,
            AddNekoButton = function(_, text, cb)
                local b = Instance.new("TextButton", NekoPage); b.Size = UDim2.new(0.95, 0, 0, 30); b.BackgroundColor3 = Color3.fromRGB(40, 40, 50); b.Text = "üêæ " .. text; b.TextColor3 = Color3.new(1, 1, 1); b.Font = "GothamMedium"; b.TextSize = 12; Instance.new("UICorner", b)
                b.MouseButton1Click:Connect(cb); NekoPage.CanvasSize = UDim2.new(0, 0, 0, NekoL.AbsoluteContentSize.Y + 10)
            end,
            AddNekoInput = function(_, text, tbl, key)
                local f = Instance.new("Frame", NekoPage); f.Size = UDim2.new(0.95, 0, 0, 34); f.BackgroundColor3 = Color3.fromRGB(30, 30, 36); Instance.new("UICorner", f)
                local t = Instance.new("TextLabel", f); t.Size = UDim2.new(0.6, 0, 1, 0); t.Position = UDim2.new(0, 10, 0, 0); t.Text = "üêà " .. text; t.TextColor3 = Color3.new(0.8, 0.8, 0.8); t.BackgroundTransparency = 1; t.Font = "Gotham"; t.TextSize = 12; t.TextXAlignment = "Left"
                local i = Instance.new("TextBox", f); i.Size = UDim2.new(0, 55, 0, 20); i.Position = UDim2.new(1, -65, 0.5, -10); i.BackgroundColor3 = Color3.fromRGB(40, 40, 45); i.Text = tostring(tbl[key]); i.TextColor3 = Color3.new(1, 1, 1); i.Font = "Gotham"; i.TextSize = 11; Instance.new("UICorner", i)
                i.FocusLost:Connect(function() tbl[key] = tonumber(i.Text) or i.Text end)
            end
        }
    end

    local NekoCombatPage = CreateNekoTab("‚öîÔ∏è ÁçµÊÆ∫", true)
    local NekoMovePage = CreateNekoTab("üöÄ Ë≤ìÊ≠•", false)
    local NekoMiscPage = CreateNekoTab("üëÅÔ∏è Ë≤ìÁúº", false)

    NekoCombatPage:AddNekoToggle("ÈÄ£ÊìäÂºïÊìé", _G, "NekoAttack")
    NekoCombatPage:AddNekoToggle("Ë≤ìÊäìÊãâÊÄ™", Settings, "PullEnemies")
    NekoCombatPage:AddNekoToggle("Ëá™ÂãïË¶∫ÈÜí", _G, "NekoV4")
    NekoCombatPage:AddNekoInput("ÊäìÊçïÁØÑÂúç", Settings, "Distance")
    NekoCombatPage:AddNekoButton("ÁçµÊÆ∫Ê®°ÂºèÔºöÂ∞èÊÄ™", function() Settings.Mode = "Mob" end)
    NekoCombatPage:AddNekoButton("ÁçµÊÆ∫Ê®°ÂºèÔºöÂÖ®Â†¥", function() Settings.Mode = "All" end)
    NekoCombatPage:AddNekoButton("Êî∂Áà™‰ºëÊÅØ", function() Settings.Mode = "None" end)

    NekoMovePage:AddNekoToggle("Ë≤ìÈÄü (SPD)", _G, "NekoSPD", function(s) if s then loadstring(game:HttpGet("https://raw.githubusercontent.com/wtf6701385-stack/-/refs/heads/main/NEKOSPD"))() end end)
    NekoMovePage:AddNekoToggle("ËºïÂäü (Fly)", _G, "NekoFly", function(s) if s then loadstring(game:HttpGet("https://raw.githubusercontent.com/wtf6701385-stack/-/refs/heads/main/NEKOFly"))() end end)
    NekoMovePage:AddNekoInput("Ë¶ñÈáéÈ´òÂ∫¶", Settings, "FOV")

    NekoMiscPage:AddNekoToggle("Ë≤ìÁúºÈÄèË¶ñ", _G, "NekoESP", function(s) if s then loadstring(game:HttpGet("https://raw.githubusercontent.com/wtf6701385-stack/-/refs/heads/main/NEKOESP"))() end end)

    UserInputService.InputBegan:Connect(function(i,p) if not p and i.KeyCode == Enum.KeyCode.Insert then NekoGui.Enabled = not NekoGui.Enabled end end)
end

if Whitelist[localPlayer.Name] then
    BuildNekoUI()
    
    task.spawn(function()
        while _G.NekoRunning do
            pcall(NekoCombatLogic)
            
            if _G.NekoV4 then
                pcall(function()
                    local char = localPlayer.Character
                    local awake = char:FindFirstChild("Awakening") or localPlayer.Backpack:FindFirstChild("Awakening")
                    if awake then awake.RemoteFunction:InvokeServer(true) end
                end)
            end
            
            Camera.FieldOfView = math.clamp(tonumber(Settings.FOV) or 70, 30, 120)
            task.wait(0.1)
        end
    end)
else
    localPlayer:Kick("Access Denied üêæ - ‰Ω†‰∏çÊòØÊú¨Ë≤ìÁöÑ‰∏ª‰∫∫ÂñµÔºÅ")
end
