-- [[ ğŸ¾ NEKO TERMINAL - FULLY CONNECTED EDITION ğŸ¾ ]] --
local Players = game:GetService("Players")
local localPlayer = Players.LocalPlayer
local CoreGui = game:GetService("CoreGui")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")

-- ==========================================
-- ã€ ğŸ¾ è²“å’ªå®¶æ—ç™½åå–® ã€‘
-- ==========================================
local WhitelistNames = {
    ["Kadys5373"] = true,
    ["jay04_23"] = true,
    ["Zn6xx"] = true,
    ["iandsere"] = true,
    ["Zadrian664"] = true,
    ["czr_0416"] = true,
    ["tw_vic2012"] = true,
}

-- ==========================================
-- ã€ ğŸ± æ ¸å¿ƒå¼•æ“è®Šæ•¸ ã€‘
-- ==========================================
local Settings = {
    ClickDelay = 0.1, 
    Distance = 500,
    PullEnemies = false, 
    Mode = "None" 
}
_G.FastAttack = false
_G.ESP = false

-- (GetRandomValidPart é‚è¼¯ä¿ç•™)
local function GetRandomValidPart(target)
    local allParts = target:GetDescendants()
    local validParts = {}
    for _, part in ipairs(allParts) do
        if part:IsA("BasePart") and part.CanCollide then
            table.insert(validParts, part)
        end
    end
    return #validParts > 0 and validParts[math.random(1, #validParts)] or target:FindFirstChild("HumanoidRootPart")
end

-- ==========================================
-- ã€ âš”ï¸ æ ¸å¿ƒæˆ°é¬¥å¼•æ“ ã€‘
-- ==========================================
local function DoNekoAction()
    local RS = game:GetService("ReplicatedStorage")
    local Net = RS:WaitForChild("Modules"):WaitForChild("Net")
    local RegAttack = Net:WaitForChild("RE/RegisterAttack")
    local RegHit = Net:WaitForChild("RE/RegisterHit")
    
    local char = localPlayer.Character
    local root = char and char:FindFirstChild("HumanoidRootPart")
    if not root then return end

    local Targets = {}
    local BasePart = nil
    
    if Settings.Mode == "Mob" or Settings.Mode == "All" then
        local folder = workspace:FindFirstChild("Enemies") or workspace
        for _, Enemy in ipairs(folder:GetChildren()) do
            local eH = Enemy:FindFirstChildOfClass("Humanoid")
            local eR = Enemy:FindFirstChild("HumanoidRootPart")
            if Enemy ~= char and not Players:GetPlayerFromCharacter(Enemy) and eH and eH.Health > 0 and eR then
                local dist = (eR.Position - root.Position).Magnitude
                if dist < Settings.Distance then
                    if Settings.PullEnemies then
                        eR.CanCollide = false
                        eR.CFrame = root.CFrame * CFrame.new(0, 0, -3)
                    end
                    local foundPart = GetRandomValidPart(Enemy)
                    table.insert(Targets, {Enemy, foundPart})
                    BasePart = foundPart
                end
            end
            if #Targets >= 15 then break end
        end
    end

    if Settings.Mode == "All" and #Targets < 15 then
        for _, p in ipairs(Players:GetPlayers()) do
            if p ~= localPlayer and p.Character and p.Character:FindFirstChild("Humanoid") and p.Character.Humanoid.Health > 0 then
                local pR = p.Character:FindFirstChild("HumanoidRootPart")
                if pR and (pR.Position - root.Position).Magnitude < Settings.Distance then
                    local foundPart = GetRandomValidPart(p.Character)
                    table.insert(Targets, {p.Character, foundPart})
                    BasePart = BasePart or foundPart
                end
            end
            if #Targets >= 15 then break end
        end
    end

    if BasePart and #Targets > 0 then
        RegAttack:FireServer(Settings.ClickDelay)
        RegHit:FireServer(BasePart, Targets)
    end
end

-- ==========================================
-- ã€ ğŸ¾ æ“ŠæŒ UI å…§æ ¸ç³»çµ± ã€‘
-- ==========================================
local function CreateNekoUI()
    if CoreGui:FindFirstChild("NEKOUI_MAIN") then CoreGui.NEKOUI_MAIN:Destroy() end
    local Gui = Instance.new("ScreenGui", CoreGui)
    Gui.Name = "NEKOUI_MAIN"; Gui.IgnoreGuiInset = true

    local Main = Instance.new("Frame", Gui)
    Main.Size = UDim2.new(0, 500, 0, 330); Main.Position = UDim2.new(0.5, -250, 0.5, -165)
    Main.BackgroundColor3 = Color3.fromRGB(20, 20, 24); Main.Active = true; Main.Draggable = true; Main.ClipsDescendants = true
    Instance.new("UICorner", Main).CornerRadius = UDim.new(0, 16)

    local Stroke = Instance.new("UIStroke", Main)
    Stroke.Thickness = 2.8; Stroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
    RunService.RenderStepped:Connect(function() Stroke.Color = Color3.fromHSV((tick() * 0.4) % 1, 0.6, 1) end)

    local Top = Instance.new("Frame", Main)
    Top.Size = UDim2.new(1, 0, 0, 45); Top.BackgroundTransparency = 1
    local T = Instance.new("TextLabel", Top)
    T.Size = UDim2.new(1, -50, 1, 0); T.Position = UDim2.new(0, 18, 0, 0)
    T.Text = " ğŸ¾ à¸…^â€¢ï»Œâ€¢^à¸… ğŸ¾ "; T.TextColor3 = Color3.new(1, 1, 1)
    T.Font = "GothamBold"; T.TextSize = 18; T.TextXAlignment = "Left"; T.BackgroundTransparency = 1

    local MiniBtn = Instance.new("TextButton", Top)
    MiniBtn.Size = UDim2.new(0, 40, 0, 40); MiniBtn.Position = UDim2.new(1, -45, 0.5, -20)
    MiniBtn.Text = "â€”"; MiniBtn.TextColor3 = Color3.new(1, 1, 1); MiniBtn.BackgroundTransparency = 1; MiniBtn.TextSize = 25

    local Content = Instance.new("Frame", Main)
    Content.Size = UDim2.new(1, 0, 1, -45); Content.Position = UDim2.new(0, 0, 0, 45); Content.BackgroundTransparency = 1

    local TabBar = Instance.new("Frame", Content)
    TabBar.Size = UDim2.new(0, 130, 1, -15); TabBar.Position = UDim2.new(0, 12, 0, 5); TabBar.BackgroundTransparency = 1
    Instance.new("UIListLayout", TabBar).Padding = UDim.new(0, 8)

    local Pages = Instance.new("Frame", Content)
    Pages.Size = UDim2.new(1, -165, 1, -15); Pages.Position = UDim2.new(0, 150, 0, 5); Pages.BackgroundTransparency = 1

    local Lib = {}
    function Lib:CreateTab(name, default)
        local Page = Instance.new("ScrollingFrame", Pages)
        Page.Size = UDim2.new(1, 0, 1, 0); Page.BackgroundTransparency = 1; Page.Visible = default; Page.ScrollBarThickness = 3
        local L = Instance.new("UIListLayout", Page); L.Padding = UDim.new(0, 10)
        local B = Instance.new("TextButton", TabBar)
        B.Size = UDim2.new(1, 0, 0, 38); B.Text = name; B.BackgroundColor3 = Color3.fromRGB(30, 30, 36)
        B.TextColor3 = default and Color3.new(1, 1, 1) or Color3.fromRGB(140, 140, 140); B.Font = "GothamMedium"; B.TextSize = 14; Instance.new("UICorner", B)
        B.MouseButton1Click:Connect(function()
            for _, p in pairs(Pages:GetChildren()) do if p:IsA("ScrollingFrame") then p.Visible = false end end
            for _, b in pairs(TabBar:GetChildren()) do if b:IsA("TextButton") then b.TextColor3 = Color3.fromRGB(140, 140, 140) end end
            Page.Visible = true; B.TextColor3 = Color3.new(1, 1, 1)
        end)

        local TabObj = {}
        function TabObj:AddToggle(text, targetTable, targetKey, callback)
            local f = Instance.new("Frame", Page); f.Size = UDim2.new(0.95, 0, 0, 42); f.BackgroundColor3 = Color3.fromRGB(32, 32, 38); Instance.new("UICorner", f)
            local t = Instance.new("TextLabel", f); t.Size = UDim2.new(1, -70, 1, 0); t.Position = UDim2.new(0, 12, 0, 0); t.Text = "ğŸ¾ " .. text; t.TextColor3 = Color3.new(1, 1, 1); t.BackgroundTransparency = 1; t.Font = "Gotham"; t.TextSize = 14; t.TextXAlignment = "Left"
            local b = Instance.new("TextButton", f); b.Size = UDim2.new(0, 50, 0, 24); b.Position = UDim2.new(1, -62, 0.5, -12); b.Text = targetTable[targetKey] and "ON" or "OFF"; b.BackgroundColor3 = targetTable[targetKey] and Color3.fromRGB(60, 200, 60) or Color3.fromRGB(60, 60, 65); b.TextColor3 = Color3.new(1, 1, 1); b.Font = "GothamBold"; b.TextSize = 11; Instance.new("UICorner", b)
            b.MouseButton1Click:Connect(function()
                targetTable[targetKey] = not targetTable[targetKey]
                b.Text = targetTable[targetKey] and "ON" or "OFF"
                b.BackgroundColor3 = targetTable[targetKey] and Color3.fromRGB(60, 200, 60) or Color3.fromRGB(60, 60, 65)
                if callback then callback(targetTable[targetKey]) end
            end)
            Page.CanvasSize = UDim2.new(0, 0, 0, L.AbsoluteContentSize.Y + 20)
        end
        function TabObj:AddButton(text, callback)
            local b = Instance.new("TextButton", Page); b.Size = UDim2.new(0.95, 0, 0, 38); b.BackgroundColor3 = Color3.fromRGB(45, 45, 55); b.Text = "ğŸ¾ " .. text; b.TextColor3 = Color3.new(1, 1, 1); b.Font = "GothamMedium"; b.TextSize = 13; Instance.new("UICorner", b)
            b.MouseButton1Click:Connect(callback); Page.CanvasSize = UDim2.new(0, 0, 0, L.AbsoluteContentSize.Y + 20)
        end
        function TabObj:AddInput(text, targetTable, targetKey, callback)
            local f = Instance.new("Frame", Page); f.Size = UDim2.new(0.95, 0, 0, 42); f.BackgroundColor3 = Color3.fromRGB(32, 32, 38); Instance.new("UICorner", f)
            local t = Instance.new("TextLabel", f); t.Size = UDim2.new(0.6, 0, 1, 0); t.Position = UDim2.new(0, 12, 0, 0); t.Text = "ğŸ¾ " .. text; t.TextColor3 = Color3.new(0.85, 0.85, 0.85); t.BackgroundTransparency = 1; t.Font = "Gotham"; t.TextSize = 13; t.TextXAlignment = "Left"
            local i = Instance.new("TextBox", f); i.Size = UDim2.new(0, 65, 0, 24); i.Position = UDim2.new(1, -75, 0.5, -12); i.BackgroundColor3 = Color3.fromRGB(45, 45, 55); i.Text = tostring(targetTable[targetKey]); i.TextColor3 = Color3.new(1, 1, 1); i.Font = "Gotham"; i.TextSize = 12; Instance.new("UICorner", i)
            i.FocusLost:Connect(function() 
                local val = tonumber(i.Text) or i.Text
                targetTable[targetKey] = val
                if callback then callback(val) end 
            end)
            Page.CanvasSize = UDim2.new(0, 0, 0, L.AbsoluteContentSize.Y + 20)
        end
        function TabObj:AddInfo(t1, t2)
            local f = Instance.new("Frame", Page); f.Size = UDim2.new(0.95, 0, 0, 55); f.BackgroundColor3 = Color3.fromRGB(25, 25, 30); Instance.new("UICorner", f)
            local l1 = Instance.new("TextLabel", f); l1.Size = UDim2.new(1, -20, 0, 25); l1.Position = UDim2.new(0, 12, 0, 6); l1.Text = t1; l1.TextColor3 = Color3.new(1, 1, 1); l1.Font = "GothamBold"; l1.TextSize = 14; l1.TextXAlignment = "Left"; l1.BackgroundTransparency = 1
            local l2 = Instance.new("TextLabel", f); l2.Size = UDim2.new(1, -20, 0, 20); l2.Position = UDim2.new(0, 12, 0, 28); l2.Text = t2; l2.TextColor3 = Color3.new(0.75, 0.75, 0.75); l2.Font = "Gotham"; l2.TextSize = 12; l2.TextXAlignment = "Left"; l2.BackgroundTransparency = 1
            Page.CanvasSize = UDim2.new(0, 0, 0, L.AbsoluteContentSize.Y + 20)
        end
        return TabObj
    end

    local opened = true
    MiniBtn.MouseButton1Click:Connect(function()
        opened = not opened
        TweenService:Create(Main, TweenInfo.new(0.4, Enum.EasingStyle.Quart), {Size = opened and UDim2.new(0, 500, 0, 330) or UDim2.new(0, 200, 0, 45)}):Play()
        Content.Visible = opened; MiniBtn.Text = opened and "â€”" or "+"
    end)
    UserInputService.InputBegan:Connect(function(i, p) if not p and i.KeyCode == Enum.KeyCode.Insert then Gui.Enabled = not Gui.Enabled end end)

    return Lib
end

-- ==========================================
-- ã€ ğŸ›¡ï¸ å•Ÿå‹•èˆ‡åŸ·è¡Œ ã€‘
-- ==========================================
if WhitelistNames[localPlayer.Name] then
    local Neko = CreateNekoUI()
    
    local Tab1 = Neko:CreateTab("ğŸ“œ å…¬å‘Šæ¬„", true)
    local Tab2 = Neko:CreateTab("âš”ï¸ æˆ°é¬¥è¨­å®š", false)
    local Tab3 = Neko:CreateTab("ğŸš€ ç§»å‹•é€²åŒ–", false)
    local Tab4 = Neko:CreateTab("ğŸ‘ï¸ è²“å’ªæ„Ÿå®˜", false)

    Tab1:AddInfo("å°è²“èªè­‰", "ä¸»äººï¼š" .. localPlayer.Name)
    Tab1:AddInfo("æ“ŠæŒç‹€æ…‹", "ğŸ¾ çµ‚æ¥µç³»çµ±å·²å°±ç·’å–µï¼")

    Tab2:AddToggle("å•Ÿå‹•æ”»æ“Šå¾ªç’° ğŸ¾", _G, "FastAttack", function(s) end)
    Tab2:AddToggle("å•Ÿå‹•è‡ªå‹•æ‹‰æ€ª ğŸ¾", Settings, "PullEnemies", function(s) end)
    Tab2:AddButton("âš”ï¸ æ¨¡å¼ï¼šç´”æ‰“æ€ª", function() Settings.Mode = "Mob" end)
    Tab2:AddButton("ğŸ”¥ æ¨¡å¼ï¼šçœ¾ç”Ÿå¹³ç­‰", function() Settings.Mode = "All" end)
    Tab2:AddInput("æ”»æ“Šç¯„åœ", Settings, "Distance", function(v) end)

    Tab3:AddButton("å•Ÿå‹• è²“å’ªåŠ é€Ÿ (SPD)", function() loadstring(game:HttpGet("https://raw.githubusercontent.com/wtf6701385-stack/-/refs/heads/main/NEKOSPD"))() end)
    Tab3:AddButton("å•Ÿå‹• é£›å¤©æ¨¡å¼ (Fly)", function() loadstring(game:HttpGet("https://raw.githubusercontent.com/wtf6701385-stack/-/refs/heads/main/NEKOFly"))() end)
    -- ğŸ¾ è²“å’ªè¶…ç´šé€²åŒ–æŒ‰éˆ•åœ¨æ­¤ï¼
    Tab3:AddButton("å•Ÿå‹• è²“å’ªè¶…ç´šé€²åŒ– (V4)", function() loadstring(game:HttpGet("https://raw.githubusercontent.com/wtf6701385-stack/-/refs/heads/main/NEKOV4"))() end)

    Tab4:AddToggle("å•Ÿå‹• è²“å’ªé€è¦– (ESP)", _G, "ESP", function(state)
        if state then loadstring(game:HttpGet("https://raw.githubusercontent.com/wtf6701385-stack/-/refs/heads/main/NEKOESP"))() end
    end)

    task.spawn(function()
        while true do
            if _G.FastAttack and Settings.Mode ~= "None" then pcall(DoNekoAction) end
            task.wait(Settings.ClickDelay)
        end
    end)
else
    localPlayer:Kick("å–µå—šï¼ä½ ä¸æ˜¯ä¸»äººï¼ğŸ¾")
end
