-- [[ 1. åŠ è¼‰ UI æ®¼åº« (é€£çµç”±ä¸»äººå°å­˜) ]] --
local library = loadstring(game:HttpGet("https://raw.githubusercontent.com/wtf6701385-stack/-/refs/heads/main/NEKOUI"))()
local myUI = library.new("ğŸ¾ NEKO TERMINAL")

-- [[ 2. æ ¸å¿ƒåŠŸèƒ½é…ç½®èˆ‡æ•¸æ“šä¸­å¿ƒ ]] --
local Settings = { 
    ClickDelay = 0.1,
    Distance = 1500,
    PullEnemies = false,
    Mode = "None",
    FOV = 70,           
    ZoomDist = 128      
}

_G.NekoAttack = false
_G.NekoV4 = false
_G.NekoRunning = true

-- [[ 3. ä¸»è…³æœ¬å°æ¥ UI åˆ†é  (Tab) èˆ‡å€å¡Š (Section) ]] --

-- --- âš”ï¸ çµæ®ºæ ¸å¿ƒåˆ†é  ---
local CombatTab = myUI.Tab("âš”ï¸ çµæ®ºæ ¸å¿ƒ")
local CombatSec = CombatTab.Section("æˆ°é¬¥ç³»çµ±")

CombatSec.Toggle("è‡ªå‹•ç¥åˆ€é€£æ“Š", function(state)
    _G.NekoAttack = state
end)

CombatSec.Toggle("è‡ªå‹•è²“æŠ“æ‹‰æ€ª", function(state)
    Settings.PullEnemies = state
end)

CombatSec.Toggle("è‡ªå‹•è¦ºé†’ (V4)", function(state)
    _G.NekoV4 = state
end)

local ModeSec = CombatTab.Section("ç›®æ¨™æ¨¡å¼åˆ‡æ›")
ModeSec.Button("æ¨¡å¼ï¼šåƒ…æ‰“å°æ€ª", function() Settings.Mode = "Mob" end)
ModeSec.Button("æ¨¡å¼ï¼šå…¨å ´ç©å®¶", function() Settings.Mode = "All" end)
ModeSec.Button("æ¨¡å¼ï¼šåœæ­¢é‹è¡Œ", function() Settings.Mode = "None" end)

-- --- ğŸš€ ç§»å‹•èº«æ³•åˆ†é  ---
local MoveTab = myUI.Tab("ğŸš€ ç§»å‹•èº«æ³•")
local MoveSec = MoveTab.Section("å¤–æ›æ¨¡çµ„")

MoveSec.Button("åŠ è¼‰ï¼šæ¥µè‡´è²“é€Ÿ (SPD)", function() 
    loadstring(game:HttpGet("https://raw.githubusercontent.com/wtf6701385-stack/-/refs/heads/main/NEKOSPD"))() 
end)

MoveSec.Button("åŠ è¼‰ï¼šè¼•åŠŸé£›è¡Œ (Fly)", function() 
    loadstring(game:HttpGet("https://raw.githubusercontent.com/wtf6701385-stack/-/refs/heads/main/NEKOFly"))() 
end)

-- --- ğŸ‘ï¸ è¦–åŸŸèª¿æ•´åˆ†é  ---
local VisualTab = myUI.Tab("ğŸ‘ï¸ è¦–åŸŸèª¿æ•´")
local VisualSec = VisualTab.Section("è²“çœ¼èˆ‡ç›¸æ©Ÿ")

VisualSec.Button("é–‹å•Ÿï¼šè²“çœ¼é€è¦– (ESP)", function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/wtf6701385-stack/-/refs/heads/main/NEKOESP"))()
end)

VisualSec.Button("è¦–è§’ï¼šæ“´å¼µ (FOV 100)", function() Settings.FOV = 100 end)
VisualSec.Button("è¦–è§’ï¼šé è¨­ (FOV 70)", function() Settings.FOV = 70 end)
VisualSec.Button("è¦–è·ï¼šè¶…é è·é›¢", function() Settings.ZoomDist = 1000 end)
VisualSec.Button("è¦–è·ï¼šæ¢å¾©é è¨­", function() Settings.ZoomDist = 128 end)

-- [[ 4. ä¸»è…³æœ¬å¾Œå°åŠŸèƒ½å¼•æ“ (ä¸å½±éŸ¿ UI é‹è¡Œ) ]] --
task.spawn(function()
    while _G.NekoRunning do
        pcall(function()
            -- A. ç¥åˆ€é€£æ“Šé‚è¼¯
            if _G.NekoAttack and Settings.Mode ~= "None" then
                local char = game.Players.LocalPlayer.Character
                local root = char and char:FindFirstChild("HumanoidRootPart")
                local Net = game.ReplicatedStorage:FindFirstChild("Modules") and game.ReplicatedStorage.Modules:FindFirstChild("Net")
                
                if Net and root then
                    local RegAttack = Net:FindFirstChild("RE/RegisterAttack")
                    local RegHit = Net:FindFirstChild("RE/RegisterHit")
                    
                    local NekoTargets = {}
                    local function Scan(folder, isPlayers)
                        for _, obj in ipairs(folder:GetChildren()) do
                            local enemyChar = isPlayers and obj.Character or obj
                            if not enemyChar or enemyChar == char then continue end
                            local eH = enemyChar:FindFirstChildOfClass("Humanoid")
                            local eR = enemyChar:FindFirstChild("HumanoidRootPart")
                            if eH and eH.Health > 0 and eR and (eR.Position - root.Position).Magnitude < Settings.Distance then
                                if Settings.PullEnemies and not isPlayers then eR.CFrame = root.CFrame * CFrame.new(0, 0, -3) end
                                table.insert(NekoTargets, {enemyChar, eR})
                            end
                            if #NekoTargets >= 15 then break end
                        end
                    end
                    
                    Scan(workspace:FindFirstChild("Enemies") or workspace, false)
                    if Settings.Mode == "All" then Scan(game.Players, true) end
                    
                    if #NekoTargets > 0 then
                        RegAttack:FireServer(Settings.ClickDelay)
                        RegHit:FireServer(NekoTargets[1][2], NekoTargets)
                    end
                end
            end
            
            -- B. è‡ªå‹•è¦ºé†’ (V4)
            if _G.NekoV4 then
                local awake = game.Players.LocalPlayer.Character:FindFirstChild("Awakening") or game.Players.LocalPlayer.Backpack:FindFirstChild("Awakening")
                if awake then awake.RemoteFunction:InvokeServer(true) end
            end
            
            -- C. ç›¸æ©Ÿæ•¸å€¼åŒæ­¥
            workspace.CurrentCamera.FieldOfView = Settings.FOV
            game.Players.LocalPlayer.CameraMaxZoomDistance = Settings.ZoomDist
        end)
        task.wait(Settings.ClickDelay)
    end
end)
