local CatLib = loadstring(game:HttpGet("https://raw.githubusercontent.com/wtf6701385-stack/-/refs/heads/main/FLYUI"))().Init()

local lp = game.Players.LocalPlayer
local mouse = lp:GetMouse()
local flying = false
local speed = 1
local ctrl = {f = 0, b = 0}

-- [[ 按鈕 1: 飛行開關 ]]
CatLib:CreateButton("(=^ω^=)", function(self)
    flying = not flying
    self.Text = flying and "FLYING" or "(=^ω^=)"
    
    if flying then
        task.spawn(function()
            local char = lp.Character or lp.CharacterAdded:Wait()
            local root = char:WaitForChild("HumanoidRootPart")
            local bg = Instance.new("BodyGyro", root)
            bg.maxTorque = Vector3.new(9e9, 9e9, 9e9)
            local bv = Instance.new("BodyVelocity", root)
            bv.maxForce = Vector3.new(9e9, 9e9, 9e9)
            
            char.Humanoid.PlatformStand = true
            while flying and char.Parent do
                game:GetService("RunService").RenderStepped:Wait()
                bv.velocity = (workspace.CurrentCamera.CFrame.LookVector * (ctrl.f) * (speed * 20))
                bg.cframe = workspace.CurrentCamera.CFrame
            end
            bg:Destroy(); bv:Destroy()
            char.Humanoid.PlatformStand = false
        end)
    end
end)

-- [[ 按鈕 2: 速度文字顯示 (這是一個不具備功能只顯示的按鈕) ]]
local speedBtn = CatLib:CreateButton("Speed: 1", function() end)

-- [[ 按鈕 3 & 4: 速度控制 ]]
CatLib:CreateButton("Speed +", function()
    speed = speed + 1
    speedBtn.Text = "Speed: " .. speed
end)

CatLib:CreateButton("Speed -", function()
    if speed > 1 then speed = speed - 1 end
    speedBtn.Text = "Speed: " .. speed
end)

-- [[ 核心監聽 ]]
mouse.KeyDown:Connect(function(key)
    if key:lower() == "w" then ctrl.f = 1 elseif key:lower() == "s" then ctrl.f = -1 end
end)
mouse.KeyUp:Connect(function(key)
    if key:lower() == "w" or key:lower() == "s" then ctrl.f = 0 end
end)
