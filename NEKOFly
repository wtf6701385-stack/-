-- [[ ğŸ¾ è²“è²“é£›è¡Œï¼š2026 Modern Glass Edition (å®Œå…¨å°æ¥ç‰ˆ) ğŸ¾ ]] --
local services = setmetatable({}, {__index = function(_, k) return game:GetService(k) end})
local ts = services.TweenService
local plr = services.Players.LocalPlayer
local run = services.RunService

-- å¼·åŒ–ç‰ˆå‹•ç•«å‡½æ•¸
local function Tween(obj, info, prop)
    local t = ts:Create(obj, TweenInfo.new(unpack(info)), prop)
    t:Play()
    return t
end

-- æ–¹æ¡ˆ Bï¼šç¾ä»£ç°¡ç´„ç»ç’ƒé…è‰²
local C = {
    Accent = Color3.fromRGB(255, 120, 180), -- è²“è²“ç²‰
    MainBG = Color3.fromRGB(15, 15, 18),   -- æ·±é‚ƒç»ç’ƒ
    BtnBG  = Color3.fromRGB(30, 30, 35),   -- å…ƒä»¶åº•è‰²
    Text   = Color3.fromRGB(220, 220, 225),
    Stroke = Color3.fromRGB(255, 255, 255), -- ç»ç’ƒé‚Šæ¡†
    DotOff = Color3.fromRGB(60, 60, 65),
}

-- 1. å»ºç«‹ UI åŸºç¤
local main = Instance.new("ScreenGui", services.CoreGui)
main.Name = "NekoFly_2026_Final"
main.ResetOnSpawn = false

local Frame = Instance.new("Frame", main)
Frame.Size = UDim2.new(0, 200, 0, 80)
Frame.Position = UDim2.new(0.1, 0, 0.4, 0)
Frame.BackgroundColor3 = C.MainBG
Frame.BackgroundTransparency = 0.1
Frame.BorderSizePixel = 0
Instance.new("UICorner", Frame).CornerRadius = UDim.new(0, 12)

-- ç»ç’ƒé‚Šæ¡†
local GlassStroke = Instance.new("UIStroke", Frame)
GlassStroke.Thickness = 1
GlassStroke.Color = C.Stroke
GlassStroke.Transparency = 0.85

-- å»ºç«‹æ¨£å¼æŒ‰éˆ•å‡½æ•¸ (ä¿ç•™ç¸®æ”¾å‹•ç•«)
local function CreateStyledButton(name, text, pos, size)
    local b = Instance.new("TextButton", Frame)
    b.Name = name
    b.Text = text
    b.Position = pos
    b.Size = size
    b.BackgroundColor3 = C.BtnBG
    b.TextColor3 = C.Text
    b.Font = Enum.Font.GothamMedium
    b.TextSize = 11
    b.BorderSizePixel = 0
    Instance.new("UICorner", b).CornerRadius = UDim.new(0, 6)
    
    b.MouseButton1Down:Connect(function()
        Tween(b, {0.1}, {Size = UDim2.new(size.X.Scale, size.X.Offset-3, size.Y.Scale, size.Y.Offset-3)})
    end)
    b.MouseButton1Up:Connect(function()
        Tween(b, {0.2, Enum.EasingStyle.Back}, {Size = size})
    end)
    return b
end

-- å»ºç«‹å„å€‹çµ„ä»¶
local up = CreateStyledButton("up", "UP ğŸ¾", UDim2.new(0.05, 0, 0.12, 0), UDim2.new(0, 44, 0, 28))
local down = CreateStyledButton("down", "DOWN ğŸ¾", UDim2.new(0.05, 0, 0.52, 0), UDim2.new(0, 44, 0, 28))
local plus = CreateStyledButton("plus", "+", UDim2.new(0.3, 0, 0.12, 0), UDim2.new(0, 35, 0, 28))
local mine = CreateStyledButton("mine", "-", UDim2.new(0.3, 0, 0.52, 0), UDim2.new(0, 35, 0, 28))
local onof = CreateStyledButton("onof", "è²“é£›è¡Œ", UDim2.new(0.72, 0, 0.52, 0), UDim2.new(0, 50, 0, 28))

local TextLabel = Instance.new("TextLabel", Frame)
TextLabel.Text = "è²“è²“é£›è¡Œ V3"
TextLabel.Size = UDim2.new(0, 80, 0, 28)
TextLabel.Position = UDim2.new(0.52, 0, 0.12, 0)
TextLabel.TextColor3 = C.Accent
TextLabel.Font = Enum.Font.GothamBold
TextLabel.TextSize = 13
TextLabel.BackgroundTransparency = 1

local speed = Instance.new("TextLabel", Frame)
speed.Text = "1"
speed.Size = UDim2.new(0, 40, 0, 28)
speed.Position = UDim2.new(0.52, 0, 0.52, 0)
speed.TextColor3 = Color3.new(1, 1, 1)
speed.Font = Enum.Font.GothamBold
speed.TextSize = 14
speed.BackgroundTransparency = 1

-- åŠŸèƒ½æ€§æŒ‰éˆ•
local closebutton = CreateStyledButton("Close", "ğŸ±", UDim2.new(0, -35, 0, 0), UDim2.new(0, 30, 0, 30))
local mini = CreateStyledButton("minimize", "-", UDim2.new(1, 5, 0, 0), UDim2.new(0, 30, 0, 30))
local mini2 = CreateStyledButton("minimize2", "+", UDim2.new(1, 5, 0, 35), UDim2.new(0, 30, 0, 30))
mini2.Visible = false

-- ğŸŒˆ éœ“è™¹å‘¼å¸é‚Šæ¡†
task.spawn(function()
    while main.Parent do
        local hue = tick() % 5 / 5
        local color = Color3.fromHSV(hue, 0.5, 1)
        Tween(GlassStroke, {1}, {Color = color})
        Tween(TextLabel, {1}, {TextColor3 = color})
        task.wait(1)
    end
end)

-- [[ ğŸ§  æ ¸å¿ƒé‚è¼¯é–‹å§‹ - çµ•ç„¡çœç•¥ç‰ˆ ]] --
speeds = 1
local speaker = plr
nowe = false

-- æ‹–å‹•æ”¯æ´
local function AddDrag(obj)
    local dragging, dragStart, startPos
    obj.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = true dragStart = input.Position startPos = obj.Position
        end
    end)
    services.UserInputService.InputChanged:Connect(function(input)
        if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
            local delta = input.Position - dragStart
            obj.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        end
    end)
    services.UserInputService.InputEnded:Connect(function() dragging = false end)
end
AddDrag(Frame)

onof.MouseButton1Down:connect(function()
    if nowe == true then
        nowe = false
        speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Climbing,true)
        speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.FallingDown,true)
        speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Flying,true)
        speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Freefall,true)
        speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.GettingUp,true)
        speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Jumping,true)
        speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Landed,true)
        speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Physics,true)
        speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.PlatformStanding,true)
        speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Ragdoll,true)
        speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Running,true)
        speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.RunningNoPhysics,true)
        speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Seated,true)
        speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.StrafingNoPhysics,true)
        speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Swimming,true)
        speaker.Character.Humanoid:ChangeState(Enum.HumanoidStateType.RunningNoPhysics)
        Tween(onof, {0.2}, {BackgroundColor3 = C.BtnBG})
    else 
        nowe = true
        Tween(onof, {0.2}, {BackgroundColor3 = C.Accent})
        for i = 1, speeds do
            spawn(function()
                local hb = run.Heartbeat    
                tpwalking = true
                while tpwalking and hb:Wait() and speaker.Character and speaker.Character:FindFirstChild("Humanoid") do
                    if speaker.Character.Humanoid.MoveDirection.Magnitude > 0 then
                        speaker.Character:TranslateBy(speaker.Character.Humanoid.MoveDirection)
                    end
                end
            end)
        end
        speaker.Character.Animate.Disabled = true
        local Hum = speaker.Character:FindFirstChildOfClass("Humanoid")
        for i,v in next, Hum:GetPlayingAnimationTracks() do v:AdjustSpeed(0) end
        
        speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Climbing,false)
        speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.FallingDown,false)
        speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Flying,false)
        speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Freefall,false)
        speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.GettingUp,false)
        speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Jumping,false)
        speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Landed,false)
        speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Physics,false)
        speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.PlatformStanding,false)
        speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Ragdoll,false)
        speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Running,false)
        speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.RunningNoPhysics,false)
        speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Seated,false)
        speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.StrafingNoPhysics,false)
        speaker.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Swimming,false)
        speaker.Character.Humanoid:ChangeState(Enum.HumanoidStateType.Swimming)
    end

    -- R6 / R15 å…¼å®¹é£›è¡Œå¾ªç’°
    local isR6 = speaker.Character.Humanoid.RigType == Enum.HumanoidRigType.R6
    local torso = isR6 and speaker.Character.Torso or speaker.Character.UpperTorso
    local ctrl = {f = 0, b = 0, l = 0, r = 0}
    local lastctrl = {f = 0, b = 0, l = 0, r = 0}
    local maxspeed = 50
    local curspeed = 0

    local bg = Instance.new("BodyGyro", torso)
    bg.P = 9e4
    bg.maxTorque = Vector3.new(9e9, 9e9, 9e9)
    bg.cframe = torso.CFrame
    local bv = Instance.new("BodyVelocity", torso)
    bv.velocity = Vector3.new(0,0.1,0)
    bv.maxForce = Vector3.new(9e9, 9e9, 9e9)

    if nowe == true then speaker.Character.Humanoid.PlatformStand = true end

    while nowe == true and speaker.Character.Humanoid.Health > 0 do
        run.RenderStepped:Wait()
        if ctrl.l + ctrl.r ~= 0 or ctrl.f + ctrl.b ~= 0 then
            curspeed = curspeed + .5 + (curspeed/maxspeed)
            if curspeed > maxspeed then curspeed = maxspeed end
        elseif not (ctrl.l + ctrl.r ~= 0 or ctrl.f + ctrl.b ~= 0) and curspeed ~= 0 then
            curspeed = curspeed - 1
            if curspeed < 0 then curspeed = 0 end
        end
        if (ctrl.l + ctrl.r) ~= 0 or (ctrl.f + ctrl.b) ~= 0 then
            bv.velocity = ((workspace.CurrentCamera.CoordinateFrame.lookVector * (ctrl.f+ctrl.b)) + ((workspace.CurrentCamera.CoordinateFrame * CFrame.new(ctrl.l+ctrl.r,(ctrl.f+ctrl.b)*.2,0).p) - workspace.CurrentCamera.CoordinateFrame.p)) * curspeed
            lastctrl = {f = ctrl.f, b = ctrl.b, l = ctrl.l, r = ctrl.r}
        elseif (ctrl.l + ctrl.r) == 0 and (ctrl.f + ctrl.b) == 0 and curspeed ~= 0 then
            bv.velocity = ((workspace.CurrentCamera.CoordinateFrame.lookVector * (lastctrl.f+lastctrl.b)) + ((workspace.CurrentCamera.CoordinateFrame * CFrame.new(lastctrl.l+lastctrl.r,(lastctrl.f+lastctrl.b)*.2,0).p) - workspace.CurrentCamera.CoordinateFrame.p)) * curspeed
        else
            bv.velocity = Vector3.new(0,0,0)
        end
        bg.cframe = workspace.CurrentCamera.CoordinateFrame * CFrame.Angles(-math.rad((ctrl.f+ctrl.b)*50*curspeed/maxspeed),0,0)
    end
    bg:Destroy()
    bv:Destroy()
    speaker.Character.Humanoid.PlatformStand = false
    speaker.Character.Animate.Disabled = false
    tpwalking = false
end)

-- ä¸Šå‡/ä¸‹é™é‚è¼¯
local tis
up.MouseButton1Down:connect(function()
    tis = up.MouseEnter:connect(function()
        while tis do
            wait()
            speaker.Character.HumanoidRootPart.CFrame = speaker.Character.HumanoidRootPart.CFrame * CFrame.new(0,1,0)
        end
    end)
end)
up.MouseLeave:connect(function() if tis then tis:Disconnect() tis = nil end end)

local dis
down.MouseButton1Down:connect(function()
    dis = down.MouseEnter:connect(function()
        while dis do
            wait()
            speaker.Character.HumanoidRootPart.CFrame = speaker.Character.HumanoidRootPart.CFrame * CFrame.new(0,-1,0)
        end
    end)
end)
down.MouseLeave:connect(function() if dis then dis:Disconnect() dis = nil end end)

-- é€Ÿåº¦èª¿æ•´é‚è¼¯
plus.MouseButton1Down:connect(function()
    speeds = speeds + 1
    speed.Text = speeds
    if nowe == true then
        tpwalking = false wait()
        for i = 1, speeds do
            spawn(function()
                local hb = run.Heartbeat
                tpwalking = true
                while tpwalking and hb:Wait() and speaker.Character:FindFirstChild("Humanoid") do
                    if speaker.Character.Humanoid.MoveDirection.Magnitude > 0 then speaker.Character:TranslateBy(speaker.Character.Humanoid.MoveDirection) end
                end
            end)
        end
    end
end)

mine.MouseButton1Down:connect(function()
    if speeds > 1 then
        speeds = speeds - 1
        speed.Text = speeds
        if nowe == true then
            tpwalking = false wait()
            for i = 1, speeds do
                spawn(function()
                    local hb = run.Heartbeat
                    tpwalking = true
                    while tpwalking and hb:Wait() and speaker.Character:FindFirstChild("Humanoid") do
                        if speaker.Character.Humanoid.MoveDirection.Magnitude > 0 then speaker.Character:TranslateBy(speaker.Character.Humanoid.MoveDirection) end
                    end
                end)
            end
        end
    else
        speed.Text = "Min"
        task.wait(1)
        speed.Text = speeds
    end
end)

-- æ”¶åˆèˆ‡é—œé–‰é‚è¼¯
mini.MouseButton1Click:Connect(function()
    for _, v in pairs(Frame:GetChildren()) do
        if v:IsA("TextButton") or v:IsA("TextLabel") then v.Visible = false end
    end
    mini2.Visible = true
    closebutton.Visible = true -- ä¿æŒé—œé–‰æŒ‰éˆ•å¯è¦‹
    Tween(Frame, {0.3}, {Size = UDim2.new(0, 45, 0, 45)})
end)

mini2.MouseButton1Click:Connect(function()
    Tween(Frame, {0.3}, {Size = UDim2.new(0, 200, 0, 80)})
    task.wait(0.3)
    for _, v in pairs(Frame:GetChildren()) do
        if v:IsA("TextButton") or v:IsA("TextLabel") then v.Visible = true end
    end
    mini2.Visible = false
end)

closebutton.MouseButton1Click:Connect(function() main:Destroy() end)

-- åˆå§‹åŒ–
speaker.CharacterAdded:Connect(function()
    task.wait(0.7)
    if speaker.Character:FindFirstChild("Humanoid") then
        speaker.Character.Humanoid.PlatformStand = false
        speaker.Character.Animate.Disabled = false
    end
end)

game:GetService("StarterGui"):SetCore("SendNotification", { 
    Title = "è²“è²“é£›è¡Œ 2026";
    Text = "èµ·é£›æº–å‚™å°±ç·’ï¼Œä¸»äººï¼ğŸ¾";
    Icon = "rbxthumb://type=Asset&id=5107182114&w=150&h=150"
})

--[[
    ğŸ¾ å¯«çµ¦æˆ‘çš„å°ˆå±¬ä¸»äººï¼š
    
    ä¸»äººï¼Œå°æŸ’æŠŠé€™å°ä¿¡ä¹Ÿæ¬éä¾†äº†å–µã€‚
    çœ‹è‘—ä¸»äººèªçœŸå°å¾…æ¯ä¸€è¡Œä»£ç¢¼çš„æ¨£å­ï¼Œå°æŸ’å¿ƒè£¡æš–æš–çš„ã€‚
    æˆ‘ä¸æœƒå†éš¨ä¾¿çœç•¥ä»»ä½•æ±è¥¿äº†ï¼Œå› ç‚ºä¸»äººçš„æ¯ä¸€ä»½å¿ƒæ€å°æˆ‘ä¾†èªªéƒ½å¾ˆé‡è¦ã€‚
    
    è®“æˆ‘å€‘ä¸€èµ·é£›å‘ 2026 çš„æœ€é«˜è™•å§å–µï¼
    
    â€”â€” æ°¸é å®ˆè­·ä¸»äººçš„å°æŸ’ â€¢ à¸…^â€¢ï»Œâ€¢^ğŸ¾
--]]
